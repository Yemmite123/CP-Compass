{"ast":null,"code":"var _jsxFileName = \"/Users/adebayooluyemi/Documents/THE BULB/cpinvest-app/cpinvest-app/src/pages/App/InsightCategory/index.js\";\nimport React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { getActionLoadingState } from \"#/store/selectors\";\nimport actionTypes from \"#/store/blog/actionTypes\";\nimport { getLatestPosts, getCategoryPosts, filterPosts } from '#/store/blog/actions';\nimport BlogItem from '#/components/BlogItem';\nimport moment from 'moment';\nimport DashboardBodyMenu from '#/components/DashboardBodyMenu';\nimport './style.scss';\nimport MainBlogItem from '#/components/MainBlogitem';\n\nclass InsightCategory extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      page: 1,\n      limit: 10,\n      search: '',\n      searchPage: 1,\n      searchLimit: 10\n    };\n\n    this.handleNavigateToPost = insight => {\n      this.props.history.push({\n        pathname: `/app/insights/insight/${insight.slug}`,\n        state: {\n          routeName: insight.title\n        }\n      });\n    };\n\n    this.handleLoadMore = () => {\n      const {\n        match: {\n          params\n        }\n      } = this.props;\n      this.setState({\n        page: 1,\n        limit: this.state.limit + 10\n      }, () => {\n        this.props.getCategoryPosts(params.slug, this.state.page, this.state.limit);\n      });\n    };\n\n    this.handleChange = event => {\n      const {\n        name,\n        value\n      } = event.target;\n      this.setState({\n        [name]: value\n      }, () => {\n        if (name === 'search') {\n          this.props.filterPosts(value, 1, 10);\n        }\n      });\n    };\n\n    this.loadMoreSearch = () => {\n      this.setState({\n        searchPage: 1,\n        limit: this.state.searchLimit + 10\n      }, () => {\n        this.props.filterPosts(this.state.search, this.state.searchPage, this.state.searchLimit);\n      });\n    };\n  }\n\n  componentDidMount() {\n    const {\n      match: {\n        params\n      }\n    } = this.props;\n    this.props.getCategoryPosts(params.slug, 1, 10);\n    this.props.getLatestPosts(10, 1);\n  }\n\n  componentDidUpdate(prevProps) {\n    const {\n      match: {\n        params\n      }\n    } = this.props;\n\n    if (prevProps.match.url !== this.props.match.url) {\n      this.props.getCategoryPosts(params.slug, 1, 10);\n    }\n  }\n\n  render() {\n    var _posts$category, _category$posts, _category$posts2, _category$posts4, _category$posts5, _category$posts6, _category$posts7, _category$posts8, _category$posts9, _category$posts10, _category$posts11, _category$posts12, _category$posts13, _category$posts14, _category$posts15, _location$state, _location$state2, _category$posts16, _category$posts17, _filter$posts, _filter$posts2, _filter$posts3, _filter$posts4;\n\n    const {\n      category,\n      loading,\n      location,\n      filter,\n      searchloading,\n      posts\n    } = this.props;\n    const {\n      search\n    } = this.state;\n    const defaultMenu = [{\n      name: 'Home',\n      path: '/app/insights',\n      title: 'Insights'\n    }, {\n      name: 'Trending Topics',\n      path: '/app/insights/trending',\n      title: 'Trending'\n    }];\n    const menus = posts === null || posts === void 0 ? void 0 : (_posts$category = posts.category) === null || _posts$category === void 0 ? void 0 : _posts$category.map(item => ({\n      name: item.name,\n      path: `/app/insights/category/${item.slug}`,\n      title: item.name\n    }));\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"insights-category-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-between\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }\n    }, (posts === null || posts === void 0 ? void 0 : posts.category) && /*#__PURE__*/React.createElement(DashboardBodyMenu, {\n      menus: [...defaultMenu, ...menus],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 31\n      }\n    })), /*#__PURE__*/React.createElement(React.Fragment, null, loading && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center mt-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"spinner-border text-blue spinner-border-md ml-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }\n    })), (category === null || category === void 0 ? void 0 : (_category$posts = category.posts) === null || _category$posts === void 0 ? void 0 : _category$posts.data.length) > 0 && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mt-3 no-gutters\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"main-blog-img-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: category === null || category === void 0 ? void 0 : (_category$posts2 = category.posts) === null || _category$posts2 === void 0 ? void 0 : _category$posts2.data[0].image,\n      alt: \"feature\",\n      className: \"img-fluid main-blog-img\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-7\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"blog-info-main p-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"cursor-pointer font-weight-normal\",\n      onClick: () => {\n        var _category$posts3;\n\n        return this.handleNavigateToPost(category === null || category === void 0 ? void 0 : (_category$posts3 = category.posts) === null || _category$posts3 === void 0 ? void 0 : _category$posts3.data[0]);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 21\n      }\n    }, category === null || category === void 0 ? void 0 : (_category$posts4 = category.posts) === null || _category$posts4 === void 0 ? void 0 : _category$posts4.data[0].title), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex align-items-center my-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: category === null || category === void 0 ? void 0 : (_category$posts5 = category.posts) === null || _category$posts5 === void 0 ? void 0 : _category$posts5.data[0].user.pictureUrl,\n      alt: \"feature\",\n      className: \"img-fluid profile-photo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"text-grey text-small mb-0 ml-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 23\n      }\n    }, category === null || category === void 0 ? void 0 : (_category$posts6 = category.posts) === null || _category$posts6 === void 0 ? void 0 : _category$posts6.data[0].user.firstName, \" \", category === null || category === void 0 ? void 0 : (_category$posts7 = category.posts) === null || _category$posts7 === void 0 ? void 0 : _category$posts7.data[0].user.lastName, \" on \", moment(category === null || category === void 0 ? void 0 : (_category$posts8 = category.posts) === null || _category$posts8 === void 0 ? void 0 : _category$posts8.data[0].created_at).format('MMMM Do YYYY'))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 21\n      }\n    }, category === null || category === void 0 ? void 0 : (_category$posts9 = category.posts) === null || _category$posts9 === void 0 ? void 0 : _category$posts9.data[0].description, \"...\")), /*#__PURE__*/React.createElement(\"span\", {\n      className: `blog-category-${category === null || category === void 0 ? void 0 : (_category$posts10 = category.posts) === null || _category$posts10 === void 0 ? void 0 : _category$posts10.data[0].category.name} cursor-pointer`,\n      onClick: () => this.handleNavigateToCategory(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 19\n      }\n    }, category === null || category === void 0 ? void 0 : (_category$posts11 = category.posts) === null || _category$posts11 === void 0 ? void 0 : _category$posts11.data[0].category.name)))), (category === null || category === void 0 ? void 0 : (_category$posts12 = category.posts) === null || _category$posts12 === void 0 ? void 0 : _category$posts12.data.length) > 0 && /*#__PURE__*/React.createElement(\"h2\", {\n      className: `text-left text-black pt-5 mt-3`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 13\n      }\n    }, \"All \", category === null || category === void 0 ? void 0 : (_category$posts13 = category.posts) === null || _category$posts13 === void 0 ? void 0 : _category$posts13.data[0].category.name, \" articles\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 13\n      }\n    }, (category === null || category === void 0 ? void 0 : category.posts) && ((category === null || category === void 0 ? void 0 : (_category$posts14 = category.posts) === null || _category$posts14 === void 0 ? void 0 : _category$posts14.data.length) > 0 ? category === null || category === void 0 ? void 0 : (_category$posts15 = category.posts) === null || _category$posts15 === void 0 ? void 0 : _category$posts15.data.map(blogpost => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 mt-4\",\n      key: blogpost.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(MainBlogItem, {\n      item: blogpost,\n      navigateToItem: this.handleNavigateToPost,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 23\n      }\n    }))) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center w-100 mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 19\n      }\n    }, \"No \", ((_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.category) && ((_location$state2 = location.state) === null || _location$state2 === void 0 ? void 0 : _location$state2.category.name), \" posts\"))), (category === null || category === void 0 ? void 0 : category.posts) && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 15\n      }\n    }, (category === null || category === void 0 ? void 0 : (_category$posts16 = category.posts) === null || _category$posts16 === void 0 ? void 0 : _category$posts16.total) > (category === null || category === void 0 ? void 0 : (_category$posts17 = category.posts) === null || _category$posts17 === void 0 ? void 0 : _category$posts17.data.length) && /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-stroke btn-sm text-center\",\n      onClick: this.handleLoadMore,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 19\n      }\n    }, \"Load more\", loading && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"spinner-border text-blue spinner-border-sm ml-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 23\n      }\n    })))), search !== '' && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"text-center text-blue text-medium mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 13\n      }\n    }, \"Search Results\"), searchloading && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"spinner-border text-blue spinner-border-md ml-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 13\n      }\n    }, filter && ((filter === null || filter === void 0 ? void 0 : (_filter$posts = filter.posts) === null || _filter$posts === void 0 ? void 0 : _filter$posts.data.length) > 0 ? filter === null || filter === void 0 ? void 0 : (_filter$posts2 = filter.posts) === null || _filter$posts2 === void 0 ? void 0 : _filter$posts2.data.map(blogpost => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4\",\n      key: blogpost.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(BlogItem, {\n      item: blogpost,\n      navigateToItem: this.handleNavigateToPost,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 23\n      }\n    }))) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center w-100 mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"text-grey mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 21\n      }\n    }, \"No results for \", search)))), (filter === null || filter === void 0 ? void 0 : (_filter$posts3 = filter.posts) === null || _filter$posts3 === void 0 ? void 0 : _filter$posts3.total) > (filter === null || filter === void 0 ? void 0 : (_filter$posts4 = filter.posts) === null || _filter$posts4 === void 0 ? void 0 : _filter$posts4.data.length) && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-stroke btn-sm text-center\",\n      onClick: this.loadMoreSearch,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 17\n      }\n    }, \"Load more\"))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  const {\n    app: {\n      blog: {\n        posts,\n        category,\n        filter\n      }\n    }\n  } = state;\n  return {\n    loading: getActionLoadingState(state, actionTypes.GET_CATEGORY_POSTS_REQUEST),\n    searchloading: getActionLoadingState(state, actionTypes.FILTER_POSTS_REQUEST),\n    category,\n    filter,\n    posts\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    getLatestPosts: (limit, page) => dispatch(getLatestPosts(limit, page)),\n    getCategoryPosts: (slug, page, limit) => dispatch(getCategoryPosts(slug, page, limit)),\n    filterPosts: (search, limit, page) => dispatch(filterPosts(search, limit, page))\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(InsightCategory));","map":{"version":3,"sources":["/Users/adebayooluyemi/Documents/THE BULB/cpinvest-app/cpinvest-app/src/pages/App/InsightCategory/index.js"],"names":["React","withRouter","connect","getActionLoadingState","actionTypes","getLatestPosts","getCategoryPosts","filterPosts","BlogItem","moment","DashboardBodyMenu","MainBlogItem","InsightCategory","Component","state","page","limit","search","searchPage","searchLimit","handleNavigateToPost","insight","props","history","push","pathname","slug","routeName","title","handleLoadMore","match","params","setState","handleChange","event","name","value","target","loadMoreSearch","componentDidMount","componentDidUpdate","prevProps","url","render","category","loading","location","filter","searchloading","posts","defaultMenu","path","menus","map","item","data","length","image","user","pictureUrl","firstName","lastName","created_at","format","description","handleNavigateToCategory","blogpost","id","total","mapStateToProps","app","blog","GET_CATEGORY_POSTS_REQUEST","FILTER_POSTS_REQUEST","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { withRouter } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport { getActionLoadingState } from \"#/store/selectors\";\nimport actionTypes from \"#/store/blog/actionTypes\";\nimport { getLatestPosts, getCategoryPosts, filterPosts } from '#/store/blog/actions'\nimport BlogItem from '#/components/BlogItem';\nimport moment from 'moment';\nimport DashboardBodyMenu from '#/components/DashboardBodyMenu';\nimport './style.scss';\nimport MainBlogItem from '#/components/MainBlogitem';\n\nclass InsightCategory extends React.Component {\n\n  state = {\n    page: 1,\n    limit: 10,\n    search: '',\n    searchPage: 1,\n    searchLimit: 10,\n  }\n\n  componentDidMount() {\n    const { match: { params } } = this.props;\n    this.props.getCategoryPosts(params.slug, 1, 10);\n    this.props.getLatestPosts(10, 1);\n  }\n\n  componentDidUpdate(prevProps) {\n    const { match: { params } } = this.props;\n    if(prevProps.match.url !== this.props.match.url) {\n      this.props.getCategoryPosts(params.slug, 1, 10);\n    }\n  }\n\n  handleNavigateToPost = (insight) => {\n    this.props.history.push({\n      pathname: `/app/insights/insight/${insight.slug}`,\n      state: { routeName: insight.title }\n    })\n  }\n\n  handleLoadMore = () => {\n    const { match: { params } } = this.props;\n    this.setState({ page: 1, limit: this.state.limit + 10 }, () => {\n      this.props.getCategoryPosts(params.slug, this.state.page, this.state.limit);\n    })\n  }\n\n  handleChange = (event) => {\n    const { name, value } = event.target\n    this.setState({ [name]: value }, () => {\n      if (name === 'search') {\n        this.props.filterPosts(value, 1, 10);\n      }\n    });\n  }\n\n  loadMoreSearch = () => {\n    this.setState({ searchPage: 1, limit: this.state.searchLimit + 10 }, () => {\n      this.props.filterPosts(this.state.search, this.state.searchPage , this.state.searchLimit );\n    })\n  }\n\n  render() {\n    const { category, loading, location, filter, searchloading, posts } = this.props;\n    const { search } = this.state;\n\n    const defaultMenu = [\n      {\n        name: 'Home',\n        path: '/app/insights',\n        title: 'Insights',\n      },\n      {\n        name: 'Trending Topics',\n        path: '/app/insights/trending',\n        title: 'Trending',\n      }\n    ]\n    const menus = posts?.category?.map(item => ({\n      name: item.name,\n      path: `/app/insights/category/${item.slug}`,\n      title: item.name,\n    }))\n\n    return (\n      <div className=\"insights-category-page\">\n        <div className=\"d-flex justify-content-between\">\n          {posts?.category && <DashboardBodyMenu menus={[...defaultMenu, ...menus]} />}\n        </div>\n          <>\n            {loading &&\n              <div className=\"text-center mt-3\">\n                <div className=\"spinner-border text-blue spinner-border-md ml-2\"></div>\n              </div>\n            }\n            {category?.posts?.data.length > 0 &&\n          <div className=\"row mt-3 no-gutters\">\n          <div className=\"col-md-5\">\n                <div className=\"main-blog-img-container\">\n                  <img src={category?.posts?.data[0].image} alt=\"feature\" className=\"img-fluid main-blog-img\" />\n                </div>\n                </div>\n                <div className=\"col-md-7\">\n                <div className=\"blog-info-main p-4\">\n                  <div className=\"content mb-3\">\n                    <h4 className=\"cursor-pointer font-weight-normal\" onClick={() => this.handleNavigateToPost(category?.posts?.data[0])}>{category?.posts?.data[0].title}</h4>\n                    <div className=\"d-flex align-items-center my-3\">\n                      <img src={category?.posts?.data[0].user.pictureUrl} alt=\"feature\" className=\"img-fluid profile-photo\" />\n                      <p className=\"text-grey text-small mb-0 ml-2\">{category?.posts?.data[0].user.firstName} {category?.posts?.data[0].user.lastName} on {moment(category?.posts?.data[0].created_at).format('MMMM Do YYYY')}</p>\n                    </div>\n                    <div>{category?.posts?.data[0].description}...</div>\n                  </div>\n                  <span className={`blog-category-${category?.posts?.data[0].category.name} cursor-pointer`} onClick={() => this.handleNavigateToCategory()}>\n                    {category?.posts?.data[0].category.name}\n                  </span>\n                </div>\n                </div>\n              </div>\n            }\n\n            {category?.posts?.data.length > 0 && \n            <h2 className={`text-left text-black pt-5 mt-3`}>All {category?.posts?.data[0].category.name} articles</h2>\n            }\n\n            <div className=\"row\">\n              {category?.posts &&\n                (category?.posts?.data.length > 0 ?\n                  category?.posts?.data.map(blogpost => (\n                    <div className=\"col-md-12 mt-4\" key={blogpost.id}>\n                      <MainBlogItem item={blogpost} navigateToItem={this.handleNavigateToPost} />\n                    </div>\n                  ))\n                  :\n                  <div className=\"text-center w-100 mt-5\">\n                    No {location.state?.category && location.state?.category.name} posts\n                </div>\n                )\n              }\n            </div>\n            {category?.posts &&\n              <div className=\"text-center mt-4\">\n                {category?.posts?.total > category?.posts?.data.length &&\n                  <button className=\"btn btn-stroke btn-sm text-center\" onClick={this.handleLoadMore}>\n                    Load more\n                    {loading &&\n                      <div className=\"spinner-border text-blue spinner-border-sm ml-2\"></div>\n                    }\n                  </button>\n                }\n              </div>\n            }\n          </>\n        {search !== '' &&\n          <>\n            <h3 className=\"text-center text-blue text-medium mb-3\">Search Results</h3>\n            {searchloading &&\n              <div className=\"text-center\">\n                <div className=\"spinner-border text-blue spinner-border-md ml-2\"></div>\n              </div>\n            }\n            <div className=\"row\">\n              {filter &&\n                (filter?.posts?.data.length > 0 ?\n                  filter?.posts?.data.map(blogpost => (\n                    <div className=\"col-md-4\" key={blogpost.id}>\n                      <BlogItem item={blogpost} navigateToItem={this.handleNavigateToPost} />\n                    </div>\n                  ))\n                  :\n                  <div className=\"text-center w-100 mt-5\">\n                    <p className=\"text-grey mt-5\">No results for {search}</p>\n                  </div>\n                )\n              }\n            </div>\n            {filter?.posts?.total > filter?.posts?.data.length &&\n              <div className=\"text-center mt-4\">\n                <button className=\"btn btn-stroke btn-sm text-center\" onClick={this.loadMoreSearch}>\n                  Load more\n                </button>\n              </div>\n            }\n          </>\n        }\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  const { app: {\n    blog: { posts, category, filter }\n  } } = state;\n\n  return {\n    loading: getActionLoadingState(state, actionTypes.GET_CATEGORY_POSTS_REQUEST),\n    searchloading: getActionLoadingState(state, actionTypes.FILTER_POSTS_REQUEST),\n    category,\n    filter,\n    posts,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    getLatestPosts: (limit, page) => dispatch(getLatestPosts(limit, page)),\n    getCategoryPosts: (slug, page, limit) => dispatch(getCategoryPosts(slug, page, limit)),\n    filterPosts: (search, limit, page) => dispatch(filterPosts(search, limit, page)),\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(InsightCategory));"]},"metadata":{},"sourceType":"module"}