{"ast":null,"code":"var _jsxFileName = \"/Users/adebayooluyemi/Documents/THE BULB/cpinvest-app/cpinvest-app/src/pages/App/Marketplace/SingleMutualFund/index.js\";\nimport React from 'react';\nimport { withRouter } from \"react-router-dom\";\nimport moment from 'moment';\nimport { connect } from \"react-redux\";\nimport { getActionLoadingState } from \"#/store/selectors\";\nimport actionTypes from \"#/store/ppi/actionTypes\";\nimport { submitMutualForm, sendFormToMail } from '#/store/ppi/actions';\nimport Document from \"#/assets/icons/document-icon-1.svg\";\nimport DownloadIcon from \"#/assets/icons/download-icon.svg\";\nimport Modal from '#/components/Modal';\nimport Textbox from '#/components/Textbox';\nimport SelectBox from '#/components/SelectBox';\nimport PhoneTextbox from '#/components/PhoneTextBox';\nimport { refineOptions } from '#/utils';\nimport { countryCodes } from '#/utils/countryCode';\nimport DateBox from '#/components/DateBox';\nimport './style.scss';\n\nclass SingleMutualFund extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      showForm: false,\n      countryCode: '+234',\n      errors: {},\n      payload: {},\n      dateOfBirth: ''\n    };\n    this.descriptionRef = React.createRef();\n\n    this.updateDetails = () => {\n      this.setState({\n        dateOfBirth: new Date(this.props.profile.dateOfBirth.split('T')[0])\n      });\n    };\n\n    this.handleChangeDate = (item, date) => {\n      this.setState({\n        [item]: date\n      });\n    };\n\n    this.openForm = () => {\n      this.setState(prevState => ({\n        showForm: !prevState.showForm\n      }));\n    };\n\n    this.closeForm = event => {\n      event.preventDefault();\n      this.setState(prevState => ({\n        showForm: !prevState.showForm\n      }));\n    };\n\n    this.submitForm = event => {\n      event.preventDefault();\n      let errors = 0;\n      this.setState({\n        errors: {}\n      });\n      const formElements = event.target.elements;\n      let payload;\n      Array.prototype.forEach.call(formElements, element => {\n        if (element.name !== '' && element.name === 'bvn' && (element.value.length < 11 || element.value.length > 11)) {\n          errors += 1;\n          return this.setState({\n            errors: {\n              bvn: 'bvn cannot be less or greater that 11 characters'\n            }\n          });\n        }\n\n        if (element.name !== '' && element.name === 'phoneNumber' && (element.value.length < 10 || element.value.length > 11)) {\n          errors += 1;\n          return this.setState({\n            errors: {\n              phoneNumber: 'phone number cannot be less than 10 or greater that 11 characters'\n            }\n          });\n        }\n\n        if (element.name !== '' && element.name === 'accountNumber' && (element.value.length < 10 || element.value.length > 10)) {\n          errors += 1;\n          return this.setState({\n            errors: {\n              accountNumber: 'account number cannot be less or greater that 10 characters'\n            }\n          });\n        }\n      });\n      Array.prototype.forEach.call(formElements, element => {\n        if (this.state.dateOfBirth !== '' && element.name !== '') {\n          return payload = { ...payload,\n            [element.name]: element.value,\n            DateOfBirth: moment(this.state.dateOfBirth).format('YYYY-MM-DD')\n          };\n        }\n\n        if (element.name !== '') {\n          return payload = { ...payload,\n            [element.name]: element.value\n          };\n        }\n      });\n\n      if (errors > 0) {\n        return null;\n      }\n\n      this.props.submitMutualForm(this.props.fund.slug, payload).then(data => {\n        this.openForm();\n      });\n    };\n\n    this.sendToMail = () => {\n      this.props.sendFormToMail(this.props.fund.slug);\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.fund) {\n      this.descriptionRef.current.innerHTML = `${this.props.fund.description}`;\n    }\n\n    if (this.props.profile) {\n      this.updateDetails();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.fund !== this.props.fund) {\n      this.descriptionRef.current.innerHTML = `${this.props.fund.description}`;\n    }\n  }\n\n  render() {\n    var _fund$formBuilder;\n\n    const {\n      fund,\n      loading,\n      mailLoading,\n      error,\n      profile\n    } = this.props;\n    const {\n      showForm,\n      errors,\n      dateOfBirth,\n      countryCode\n    } = this.state;\n    const filename = fund.document ? fund.document[0].substring(fund.document[0].lastIndexOf('/') + 1) : '';\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"single-fund-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 7\n      }\n    }, showForm && /*#__PURE__*/React.createElement(Modal, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"text-center text-blue\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 15\n      }\n    }, \"Instructions\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"text-grey font-weight-light text-center text-small\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 15\n      }\n    }, fund.instructions ? fund.instructions : 'Orders must be made in accordance with the instructions set out in the Private Placement Memorandum. Investors must carefully follow all instructions as applications which do not comply with the instruction may be rejected. If in any doubt, consult your Stockbroker, Accountant, Banker, Solicitor or any professional adviser for guidance.'), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.submitForm,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 17\n      }\n    }, fund.isFormBuilder === 1 && /*#__PURE__*/React.createElement(React.Fragment, null, (_fund$formBuilder = fund.formBuilder) === null || _fund$formBuilder === void 0 ? void 0 : _fund$formBuilder.map((item, i) => {\n      var _profile$countryCode, _profile$phone;\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: i,\n        className: \"col-md-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 25\n        }\n      }, item.type === 'select' ? /*#__PURE__*/React.createElement(SelectBox, {\n        label: item.title,\n        placeholder: item.placeholder,\n        name: item.name,\n        options: refineOptions(item.options),\n        value: \"value\",\n        optionName: \"name\",\n        boxClasses: \"mt-3\",\n        actualDefaultValue: item.name === 'bankName' ? profile.bankInfo && profile.bankInfo['bankName'].toLowerCase() : profile[item.name],\n        required: true,\n        error: errors && errors[item.name],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 29\n        }\n      }) : item.name === 'phoneNumber' ? /*#__PURE__*/React.createElement(PhoneTextbox, {\n        name: item.name,\n        label: item.title,\n        placeholder: item.placeholder,\n        boxClasses: \"mt-3\",\n        options: countryCodes,\n        selectName: \"countryCode\",\n        type: item.type,\n        id: item.name.toLowerCase(),\n        actualCodeDefaultValue: (_profile$countryCode = profile === null || profile === void 0 ? void 0 : profile.countryCode) !== null && _profile$countryCode !== void 0 ? _profile$countryCode : countryCode,\n        maxlength: \"11\",\n        error: errors && errors[item.name],\n        defaultNumber: (_profile$phone = profile === null || profile === void 0 ? void 0 : profile.phone) !== null && _profile$phone !== void 0 ? _profile$phone : '',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 27\n        }\n      }) : item.name === 'DateOfBirth' ? /*#__PURE__*/React.createElement(DateBox, {\n        label: item.title,\n        placeholder: item.placeholder,\n        name: item.name,\n        boxClasses: \"mt-3\",\n        error: errors && errors[item.name],\n        type: item.type,\n        id: item.name.toLowerCase(),\n        value: dateOfBirth,\n        defaultValue: dateOfBirth,\n        max: new Date(),\n        required: true,\n        onChange: date => this.handleChangeDate('dateOfBirth', date),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 26\n        }\n      }) : /*#__PURE__*/React.createElement(Textbox, {\n        type: item.type,\n        name: item.name,\n        placeholder: item.placeholder,\n        label: item.title,\n        id: item.name.toLowerCase(),\n        required: true,\n        boxClasses: \"mt-3\",\n        defaultValue: ['accountNumber'].includes(item.name) ? profile.bankInfo && profile.bankInfo[item.name] : item.name === 'Nationality' ? profile.nationality : item.name === 'address' ? profile.residentialAddress : item.name === 'MiddleName' ? profile.middleName : item.name === 'MothersMaiden Name' ? profile.motherMaidenName : profile[item.name],\n        error: errors && errors[item.name],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 26\n        }\n      }));\n    }))), error && typeof error === 'string' && /*#__PURE__*/React.createElement(\"p\", {\n      className: \"text-error mt-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 54\n      }\n    }, error), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mt-4 d-flex justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn w-25 btn-sm btn-stroke mr-2\",\n      onClick: this.closeForm,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 17\n      }\n    }, \"Cancel\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn w-25 btn-sm btn-primary\",\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 17\n      }\n    }, \"submit\", loading && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"spinner-border spinner-border-white spinner-border-sm ml-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 21\n      }\n    })))))), /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"border-bottom pb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 9\n      }\n    }, fund.title), fund.image && /*#__PURE__*/React.createElement(\"img\", {\n      src: fund.image,\n      alt: fund.title,\n      className: \"fund-image\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 24\n      }\n    }), fund.image && /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 24\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"font-weight-normal mb-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 9\n      }\n    }, \"Summary:\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 9\n      }\n    }, fund.summary), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"font-weight-normal mb-1 mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }\n    }, \"Description:\"), /*#__PURE__*/React.createElement(\"div\", {\n      ref: this.descriptionRef,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 9\n      }\n    }), fund.document && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"send-email-section d-flex justify-content-between align-items-center flex-wrap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: Document,\n      alt: \"document\",\n      className: \"img-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"mb-0 ml-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 17\n      }\n    }, filename.length > 35 ? `${filename.substring(0, 35)}...` : filename)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-sm btn-primary\",\n      onClick: this.sendToMail,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 17\n      }\n    }, \"Send doc to my email\", mailLoading && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"spinner-border spinner-border-white spinner-border-sm ml-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 21\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"download-section d-flex justify-content-between align-items-center flex-wrap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: Document,\n      alt: \"document\",\n      className: \"img-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"mb-0 ml-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 17\n      }\n    }, filename.length > 35 ? `${filename.substring(0, 35)}...` : filename)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: (fund === null || fund === void 0 ? void 0 : fund.document) && fund.document[0],\n      target: \"_blank\",\n      download: true,\n      rel: \"noopener noreferrer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: DownloadIcon,\n      alt: \"download\",\n      className: \"mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"text-blue\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 19\n      }\n    }, \"Download\")))), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"font-weight-bold mb-1 mt-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 13\n      }\n    }, \"Submission of form\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 13\n      }\n    }, \"When done filling the form, please send it to \", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"text-blue\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 62\n      }\n    }, \"admin@cpcompass.com\"))), fund.isFormBuilder === 1 && /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary btn-sm\",\n      onClick: this.openForm,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 11\n      }\n    }, \"Invest Now\"));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  const {\n    app: {\n      ppi: {\n        data,\n        error\n      },\n      profile: {\n        userProfile: {\n          data: profile\n        }\n      }\n    }\n  } = state;\n  return {\n    loading: getActionLoadingState(state, actionTypes.SUBMIT_MUTUAL_FORM_REQUEST),\n    mailLoading: getActionLoadingState(state, actionTypes.SEND_FORM_TO_EMAIL_REQUEST),\n    data,\n    error,\n    profile\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    submitMutualForm: (slug, payload) => dispatch(submitMutualForm(slug, payload)),\n    sendFormToMail: slug => dispatch(sendFormToMail(slug))\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(SingleMutualFund));","map":{"version":3,"sources":["/Users/adebayooluyemi/Documents/THE BULB/cpinvest-app/cpinvest-app/src/pages/App/Marketplace/SingleMutualFund/index.js"],"names":["React","withRouter","moment","connect","getActionLoadingState","actionTypes","submitMutualForm","sendFormToMail","Modal","Textbox","SelectBox","PhoneTextbox","refineOptions","countryCodes","DateBox","SingleMutualFund","Component","state","showForm","countryCode","errors","payload","dateOfBirth","descriptionRef","createRef","updateDetails","setState","Date","props","profile","split","handleChangeDate","item","date","openForm","prevState","closeForm","event","preventDefault","submitForm","formElements","target","elements","Array","prototype","forEach","call","element","name","value","length","bvn","phoneNumber","accountNumber","DateOfBirth","format","fund","slug","then","data","sendToMail","componentDidMount","current","innerHTML","description","componentDidUpdate","prevProps","render","loading","mailLoading","error","filename","document","substring","lastIndexOf","instructions","isFormBuilder","formBuilder","map","i","type","title","placeholder","options","bankInfo","toLowerCase","phone","includes","nationality","residentialAddress","middleName","motherMaidenName","image","summary","Document","DownloadIcon","mapStateToProps","app","ppi","userProfile","SUBMIT_MUTUAL_FORM_REQUEST","SEND_FORM_TO_EMAIL_REQUEST","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { withRouter } from \"react-router-dom\";\nimport moment from 'moment';\nimport { connect } from \"react-redux\";\nimport { getActionLoadingState } from \"#/store/selectors\";\nimport actionTypes from \"#/store/ppi/actionTypes\";\nimport { submitMutualForm, sendFormToMail } from '#/store/ppi/actions'\nimport Document from '#/assets/icons/document-icon-1.svg';\nimport DownloadIcon from '#/assets/icons/download-icon.svg';\nimport Modal from '#/components/Modal';\nimport Textbox from '#/components/Textbox';\nimport SelectBox from '#/components/SelectBox';\nimport PhoneTextbox from '#/components/PhoneTextBox';\nimport { refineOptions } from '#/utils';\nimport { countryCodes } from '#/utils/countryCode';\nimport DateBox from '#/components/DateBox';\nimport './style.scss';\nclass SingleMutualFund extends React.Component {\n\n  state = {\n    showForm: false,\n    countryCode: '+234',\n    errors: {},\n    payload: {},\n    dateOfBirth: ''\n  }\n  descriptionRef = React.createRef();\n\n  componentDidMount() {\n    if (this.props.fund) {\n      this.descriptionRef.current.innerHTML = `${this.props.fund.description}`\n    }\n    if(this.props.profile) {\n      this.updateDetails()\n    }\n  }\n\n  componentDidUpdate(prevProps){\n    if (prevProps.fund !== this.props.fund) {\n      this.descriptionRef.current.innerHTML = `${this.props.fund.description}`\n    }\n  }\n\n  updateDetails = () => {\n    this.setState({\n      dateOfBirth: new Date(this.props.profile.dateOfBirth.split('T')[0])\n    })\n  }\n\n  handleChangeDate = (item, date) => {\n    this.setState({ [item]: date });\n  }\n\n  openForm = () => {\n    this.setState(prevState => ({ showForm: !prevState.showForm }));\n  }\n\n  closeForm = (event) => {\n    event.preventDefault();\n    this.setState(prevState => ({ showForm: !prevState.showForm }));\n  }\n\n  submitForm = (event) => {\n    event.preventDefault();\n\n    let errors = 0;\n    this.setState({ errors: {} });\n\n    const formElements = event.target.elements;\n    let payload;\n\n    Array.prototype.forEach.call(formElements, (element) => {\n      if(element.name !== '' && element.name === 'bvn' && (element.value.length < 11 || element.value.length > 11 )){\n        errors +=1;\n        return this.setState({ errors: { bvn: 'bvn cannot be less or greater that 11 characters'} });\n      }\n      if(element.name !== '' && element.name === 'phoneNumber' && (element.value.length < 10 || element.value.length > 11 )){\n        errors +=1;\n        return this.setState({ errors: { phoneNumber: 'phone number cannot be less than 10 or greater that 11 characters'} });\n      }\n      if(element.name !== '' && element.name === 'accountNumber' && (element.value.length < 10 || element.value.length > 10 )){\n        errors +=1;\n        return this.setState({ errors: { accountNumber: 'account number cannot be less or greater that 10 characters'} });\n      }\n    });\n\n    Array.prototype.forEach.call(formElements, (element) => {\n      if(this.state.dateOfBirth !== '' && element.name !== '') {\n        return payload = {\n          ...payload, [element.name]: element.value, DateOfBirth: moment(this.state.dateOfBirth).format('YYYY-MM-DD')\n        }\n      }\n      if(element.name !== ''){\n        return payload = {\n          ...payload, [element.name]: element.value\n        }\n      }\n    });\n\n    if (errors > 0) {\n      return null;\n    }\n\n    this.props.submitMutualForm(this.props.fund.slug, payload)\n    .then(data => {\n      this.openForm();\n    });\n  }\n\n  sendToMail = () => {\n    this.props.sendFormToMail(this.props.fund.slug);\n  }\n\n  render() {\n    const { fund, loading, mailLoading, error, profile } = this.props;\n    const { showForm, errors, dateOfBirth, countryCode } = this.state;\n    const filename = fund.document ? fund.document[0].substring(fund.document[0].lastIndexOf('/') + 1) : '';\n\n    return (\n      <div className=\"single-fund-page\">\n        {\n          showForm &&\n          <Modal>\n            <div className=\"content\">\n              <h4 className=\"text-center text-blue\">Instructions</h4>\n              <p className=\"text-grey font-weight-light text-center text-small\">\n                {fund.instructions ? fund.instructions : \n              'Orders must be made in accordance with the instructions set out in the Private Placement Memorandum. Investors must carefully follow all instructions as applications which do not comply with the instruction may be rejected. If in any doubt, consult your Stockbroker, Accountant, Banker, Solicitor or any professional adviser for guidance.'\n                }\n              </p>\n              <form onSubmit={this.submitForm}>\n                <div className=\"row\">\n\n\n              {fund.isFormBuilder === 1 &&\n                <>\n                  {\n                    fund.formBuilder?.map((item, i) => {\n                      return (\n                        <div key={i} className=\"col-md-6\">\n                          {item.type === 'select' ?\n                            <SelectBox\n                              label={item.title}\n                              placeholder={item.placeholder}\n                              name={item.name}\n                              options={refineOptions(item.options)}\n                              value=\"value\"\n                              optionName=\"name\"\n                              boxClasses=\"mt-3\"\n                              actualDefaultValue={item.name === 'bankName' ? profile.bankInfo && profile.bankInfo['bankName'].toLowerCase() : profile[item.name]}\n                              required\n                              error={errors && errors[item.name]}\n                            />\n                          :\n                          ( item.name === 'phoneNumber' ?\n                          <PhoneTextbox \n                            name={item.name}\n                            label={item.title}\n                            placeholder={item.placeholder}\n                            boxClasses=\"mt-3\"\n                            options={countryCodes}\n                            selectName=\"countryCode\"\n                            type={item.type}\n                            id={item.name.toLowerCase()}\n                            actualCodeDefaultValue={profile?.countryCode ?? countryCode}\n                            maxlength=\"11\"\n                            error={errors && errors[item.name]}\n                            defaultNumber={profile?.phone ?? ''}\n                          />\n                          :\n                         ( item.name === 'DateOfBirth' ?\n                         <DateBox\n                            label={item.title}\n                            placeholder={item.placeholder}\n                            name={item.name}\n                            boxClasses=\"mt-3\"\n                            error={errors && errors[item.name]}\n                            type={item.type}\n                            id={item.name.toLowerCase()}\n                            value={dateOfBirth}\n                            defaultValue={dateOfBirth}\n                            max={new Date()}\n                            required\n                            onChange={date => this.handleChangeDate('dateOfBirth', date)}\n                          />\n                         :\n                         <Textbox\n                          type={item.type}\n                          name={item.name}\n                          placeholder={item.placeholder}\n                          label={item.title}\n                          id={item.name.toLowerCase()}\n                          required\n                          boxClasses=\"mt-3\"\n                          defaultValue={\n                            ['accountNumber'].includes(item.name) \n                            ? profile.bankInfo && profile.bankInfo[item.name]\n                            : item.name === 'Nationality'\n                            ?  profile.nationality \n                            : item.name === 'address' \n                            ? profile.residentialAddress \n                            : item.name === 'MiddleName'\n                            ? profile.middleName\n                            : item.name === 'MothersMaiden Name'\n                            ? profile.motherMaidenName\n                            : profile[item.name]\n                          }\n                          error={errors && errors[item.name]}\n                          />)\n                          )\n                        }\n                        </div>\n                      )\n                    })\n                  }\n                </>\n              }\n              </div>\n              {error && typeof error === 'string' && <p className=\"text-error mt-2\">{error}</p>}\n\n              <div className=\"mt-4 d-flex justify-content-center\">\n                <button className=\"btn w-25 btn-sm btn-stroke mr-2\" onClick={this.closeForm}>\n                  Cancel\n                </button>\n                <button className=\"btn w-25 btn-sm btn-primary\" type=\"submit\">\n                  submit\n                  {loading &&\n                    <div className=\"spinner-border spinner-border-white spinner-border-sm ml-2\"></div>\n                  }\n                </button>\n              </div>\n            </form>\n            </div>\n          </Modal>\n        }\n        <h3 className=\"border-bottom pb-2\">{fund.title}</h3>\n        {fund.image && <img src={fund.image} alt={fund.title} className=\"fund-image\" /> }\n        {fund.image && <hr /> }\n        <p className=\"font-weight-normal mb-1\">Summary:</p>\n        <p>{fund.summary}</p>\n\n        <p className=\"font-weight-normal mb-1 mt-5\">Description:</p>\n        <div ref={this.descriptionRef}>\n        </div>\n        {\n          fund.document &&\n          <>\n            <div className=\"send-email-section d-flex justify-content-between align-items-center flex-wrap\">\n              <div className=\"d-flex mb-2\">\n                <img src={Document} alt=\"document\" className=\"img-fluid\" />\n                <p className=\"mb-0 ml-2\">\n                  {filename.length > 35 ? `${filename.substring(0, 35)}...` : filename }\n                </p>\n              </div>\n              <div className=\"d-flex mb-2\">\n                <button className=\"btn btn-sm btn-primary\" onClick={this.sendToMail}>\n                  Send doc to my email\n                  {mailLoading &&\n                    <div className=\"spinner-border spinner-border-white spinner-border-sm ml-2\"></div>\n                  }\n                </button>\n              </div>\n            </div>\n            <div className=\"download-section d-flex justify-content-between align-items-center flex-wrap\">\n              <div className=\"d-flex\">\n                <img src={Document} alt=\"document\" className=\"img-fluid\" />\n                <p className=\"mb-0 ml-2\">\n                  {filename.length > 35 ? `${filename.substring(0, 35)}...` : filename }\n                </p>\n              </div>\n              <div className=\"d-flex\">\n                <a href={fund?.document && fund.document[0]} target=\"_blank\" download rel=\"noopener noreferrer\">\n                  <img src={DownloadIcon} alt=\"download\" className=\"mr-2\"/>\n                  <span className=\"text-blue\">Download</span>\n                </a>\n              </div>\n            </div>\n            <p className=\"font-weight-bold mb-1 mt-3\">Submission of form</p>\n            <p>When done filling the form, please send it to <span className=\"text-blue\">admin@cpcompass.com</span></p>\n          </>\n        }\n        {\n          fund.isFormBuilder === 1 &&\n          <button className=\"btn btn-primary btn-sm\" onClick={this.openForm}>\n            Invest Now\n          </button>\n        }\n\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  const { app: { ppi: { data, error }, profile: { userProfile: { data:profile } } } } = state;\n\n  return {\n    loading: getActionLoadingState(state, actionTypes.SUBMIT_MUTUAL_FORM_REQUEST),\n    mailLoading: getActionLoadingState(state, actionTypes.SEND_FORM_TO_EMAIL_REQUEST),\n    data,\n    error,\n    profile,\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    submitMutualForm: (slug, payload) => dispatch(submitMutualForm(slug, payload)),\n    sendFormToMail: (slug) => dispatch(sendFormToMail(slug)),\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(SingleMutualFund));"]},"metadata":{},"sourceType":"module"}