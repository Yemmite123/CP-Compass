{"ast":null,"code":"var _jsxFileName = \"/Users/adebayooluyemi/Documents/THE BULB/cpinvest-app/cpinvest-app/src/pages/App/LatestInsights/index.js\";\nimport React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport moment from 'moment';\nimport { getActionLoadingState } from \"#/store/selectors\";\nimport actionTypes from \"#/store/blog/actionTypes\";\nimport { getRecentPosts, filterPosts } from '#/store/blog/actions';\nimport BlogItem from '#/components/BlogItem';\nimport Back from '#/components/Back';\nimport './style.scss';\nimport MainBlogItem from '#/components/MainBlogitem';\n\nclass LatestInsights extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      page: 1,\n      limit: 10,\n      search: '',\n      searchPage: 1,\n      searchLimit: 10\n    };\n\n    this.handleNavigateToPost = insight => {\n      this.props.history.push({\n        pathname: `/app/insights/insight/${insight.slug}`,\n        state: {\n          routeName: insight.title\n        }\n      });\n    };\n\n    this.handleChange = event => {\n      const {\n        name,\n        value\n      } = event.target;\n      this.setState({\n        [name]: value\n      }, () => {\n        if (name === 'search') {\n          this.props.filterPosts(value, 1, 10);\n        }\n      });\n    };\n\n    this.handleLoadMore = () => {\n      this.setState({\n        page: 1,\n        limit: this.state.limit + 10\n      }, () => {\n        this.props.getRecentPosts(this.state.limit, this.state.page);\n      });\n    };\n\n    this.loadMoreSearch = () => {\n      this.setState({\n        searchPage: 1,\n        limit: this.state.searchLimit + 10\n      }, () => {\n        this.props.filterPosts(this.state.search, this.state.searchPage, this.state.searchLimit);\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.props.getRecentPosts(10, 1);\n  }\n\n  render() {\n    var _recent$data$, _recent$data$2, _recent$data$3, _recent$data$4, _recent$data$4$catego, _recent$data$5, _recent$data$5$catego, _filter$posts, _filter$posts2, _filter$posts3, _filter$posts4;\n\n    const {\n      recent,\n      loading,\n      filter,\n      searchloading\n    } = this.props;\n    const {\n      search\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"insights-category-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-between\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Back, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }\n    })), search === '' && /*#__PURE__*/React.createElement(React.Fragment, null, loading && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center mt-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"spinner-border text-blue spinner-border-md ml-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }\n    })), (recent === null || recent === void 0 ? void 0 : recent.data.length) > 0 && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mt-3 no-gutters\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"main-blog-img-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: recent === null || recent === void 0 ? void 0 : (_recent$data$ = recent.data[0]) === null || _recent$data$ === void 0 ? void 0 : _recent$data$.image,\n      alt: \"feature\",\n      className: \"img-fluid main-blog-img\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-7\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"blog-info-main p-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"cursor-pointer font-weight-normal\",\n      onClick: () => this.handleNavigateToPost(recent === null || recent === void 0 ? void 0 : recent.data[0]),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 21\n      }\n    }, recent === null || recent === void 0 ? void 0 : recent.data[0].title), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex align-items-center my-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: recent === null || recent === void 0 ? void 0 : (_recent$data$2 = recent.data[0]) === null || _recent$data$2 === void 0 ? void 0 : _recent$data$2.user.pictureUrl,\n      alt: \"feature\",\n      className: \"img-fluid profile-photo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"text-grey text-small mb-0 ml-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 23\n      }\n    }, recent === null || recent === void 0 ? void 0 : recent.data[0].user.firstName, \" \", recent === null || recent === void 0 ? void 0 : recent.data[0].user.lastName, \" on \", moment(recent === null || recent === void 0 ? void 0 : recent.data[0].created_at).format('MMMM Do YYYY'))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 21\n      }\n    }, recent === null || recent === void 0 ? void 0 : (_recent$data$3 = recent.data[0]) === null || _recent$data$3 === void 0 ? void 0 : _recent$data$3.description, \"...\")), /*#__PURE__*/React.createElement(\"span\", {\n      className: `blog-category-${recent === null || recent === void 0 ? void 0 : (_recent$data$4 = recent.data[0]) === null || _recent$data$4 === void 0 ? void 0 : (_recent$data$4$catego = _recent$data$4.category) === null || _recent$data$4$catego === void 0 ? void 0 : _recent$data$4$catego.name} cursor-pointer`,\n      onClick: () => this.handleNavigateToCategory(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 19\n      }\n    }, recent === null || recent === void 0 ? void 0 : (_recent$data$5 = recent.data[0]) === null || _recent$data$5 === void 0 ? void 0 : (_recent$data$5$catego = _recent$data$5.category) === null || _recent$data$5$catego === void 0 ? void 0 : _recent$data$5$catego.name)))), (recent === null || recent === void 0 ? void 0 : recent.data.length) > 0 && /*#__PURE__*/React.createElement(\"h2\", {\n      className: `text-left text-black pt-5 mt-3`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 15\n      }\n    }, \"All Latest articles\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }\n    }, (recent === null || recent === void 0 ? void 0 : recent.data) && ((recent === null || recent === void 0 ? void 0 : recent.data.length) > 0 ? recent === null || recent === void 0 ? void 0 : recent.data.map(blogpost => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 mt-4\",\n      key: blogpost.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(MainBlogItem, {\n      item: blogpost,\n      navigateToItem: this.handleNavigateToPost,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 23\n      }\n    }))) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 19\n      }\n    }, \"No recent topics\"))), (recent === null || recent === void 0 ? void 0 : recent.data) && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center mt-4 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 15\n      }\n    }, (recent === null || recent === void 0 ? void 0 : recent.data.length) !== (recent === null || recent === void 0 ? void 0 : recent.total) && /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-stroke-black btn-sm text-center\",\n      onClick: this.handleLoadMore,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 19\n      }\n    }, \"Load more\", loading && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"spinner-border text-black spinner-border-sm ml-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 23\n      }\n    })))), search !== '' && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"text-center text-blue text-medium mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 13\n      }\n    }, \"Search Results\"), searchloading && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"spinner-border text-blue spinner-border-md ml-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 13\n      }\n    }, filter && ((filter === null || filter === void 0 ? void 0 : (_filter$posts = filter.posts) === null || _filter$posts === void 0 ? void 0 : _filter$posts.data.length) > 0 ? filter === null || filter === void 0 ? void 0 : (_filter$posts2 = filter.posts) === null || _filter$posts2 === void 0 ? void 0 : _filter$posts2.data.map(blogpost => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4\",\n      key: blogpost.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(BlogItem, {\n      item: blogpost,\n      navigateToItem: this.handleNavigateToPost,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 23\n      }\n    }))) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center w-100 mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"text-grey mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 21\n      }\n    }, \"No results for \", search)))), (filter === null || filter === void 0 ? void 0 : (_filter$posts3 = filter.posts) === null || _filter$posts3 === void 0 ? void 0 : _filter$posts3.total) > (filter === null || filter === void 0 ? void 0 : (_filter$posts4 = filter.posts) === null || _filter$posts4 === void 0 ? void 0 : _filter$posts4.data.length) && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-stroke-black btn-sm text-center\",\n      onClick: this.loadMoreSearch,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 17\n      }\n    }, \"Load more\"))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  const {\n    app: {\n      blog: {\n        recent,\n        filter\n      }\n    }\n  } = state;\n  return {\n    loading: getActionLoadingState(state, actionTypes.GET_RECENT_POSTS_REQUEST),\n    searchloading: getActionLoadingState(state, actionTypes.FILTER_POSTS_REQUEST),\n    recent,\n    filter\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    getRecentPosts: (limit, page) => dispatch(getRecentPosts(limit, page)),\n    filterPosts: (search, limit, page) => dispatch(filterPosts(search, limit, page))\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(LatestInsights));","map":{"version":3,"sources":["/Users/adebayooluyemi/Documents/THE BULB/cpinvest-app/cpinvest-app/src/pages/App/LatestInsights/index.js"],"names":["React","withRouter","connect","moment","getActionLoadingState","actionTypes","getRecentPosts","filterPosts","BlogItem","Back","MainBlogItem","LatestInsights","Component","state","page","limit","search","searchPage","searchLimit","handleNavigateToPost","insight","props","history","push","pathname","slug","routeName","title","handleChange","event","name","value","target","setState","handleLoadMore","loadMoreSearch","componentDidMount","render","recent","loading","filter","searchloading","data","length","image","user","pictureUrl","firstName","lastName","created_at","format","description","category","handleNavigateToCategory","map","blogpost","id","total","posts","mapStateToProps","app","blog","GET_RECENT_POSTS_REQUEST","FILTER_POSTS_REQUEST","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { withRouter } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport moment from 'moment';\nimport { getActionLoadingState } from \"#/store/selectors\";\nimport actionTypes from \"#/store/blog/actionTypes\";\nimport { getRecentPosts, filterPosts } from '#/store/blog/actions'\nimport BlogItem from '#/components/BlogItem';\nimport Back from '#/components/Back';\nimport './style.scss';\nimport MainBlogItem from '#/components/MainBlogitem';\n\n\nclass LatestInsights extends React.Component {\n\n  state = {\n    page: 1,\n    limit: 10,\n    search: '',\n    searchPage: 1,\n    searchLimit: 10,\n  }\n\n  componentDidMount() {\n    this.props.getRecentPosts(10, 1);\n  }\n\n  handleNavigateToPost = (insight) => {\n    this.props.history.push({\n      pathname: `/app/insights/insight/${insight.slug}`,\n      state: { routeName: insight.title }\n    })\n  }\n\n  handleChange = (event) => {\n    const { name, value } = event.target\n    this.setState({ [name]: value }, () => {\n      if (name === 'search') {\n        this.props.filterPosts(value, 1, 10);\n      }\n    });\n  }\n\n  handleLoadMore = () => {\n    this.setState({ page: 1, limit: this.state.limit + 10 }, () => {\n      this.props.getRecentPosts(this.state.limit, this.state.page);\n    })\n  }\n\n  loadMoreSearch = () => {\n    this.setState({ searchPage: 1, limit: this.state.searchLimit + 10 }, () => {\n      this.props.filterPosts(this.state.search, this.state.searchPage, this.state.searchLimit);\n    })\n  }\n\n  render() {\n    const { recent, loading, filter, searchloading } = this.props;\n    const { search } = this.state;\n\n    return (\n      <div className=\"insights-category-page\">\n        <div className=\"d-flex justify-content-between\">\n          <Back />\n        </div>\n        {search === '' &&\n          <>\n            {loading &&\n              <div className=\"text-center mt-3\">\n                <div className=\"spinner-border text-blue spinner-border-md ml-2\"></div>\n              </div>\n            }\n\n            {recent?.data.length > 0 &&\n          <div className=\"row mt-3 no-gutters\">\n          <div className=\"col-md-5\">\n                <div className=\"main-blog-img-container\">\n                  <img src={recent?.data[0]?.image} alt=\"feature\" className=\"img-fluid main-blog-img\" />\n                </div>\n                </div>\n                <div className=\"col-md-7\">\n                <div className=\"blog-info-main p-4\">\n                  <div className=\"content mb-3\">\n                    <h4 className=\"cursor-pointer font-weight-normal\" onClick={() => this.handleNavigateToPost(recent?.data[0])}>{recent?.data[0].title}</h4>\n                    <div className=\"d-flex align-items-center my-3\">\n                      <img src={recent?.data[0]?.user.pictureUrl} alt=\"feature\" className=\"img-fluid profile-photo\" />\n                      <p className=\"text-grey text-small mb-0 ml-2\">{recent?.data[0].user.firstName} {recent?.data[0].user.lastName} on {moment(recent?.data[0].created_at).format('MMMM Do YYYY')}</p>\n                    </div>\n                    <div>{recent?.data[0]?.description}...</div>\n                  </div>\n                  <span className={`blog-category-${recent?.data[0]?.category?.name} cursor-pointer`} onClick={() => this.handleNavigateToCategory()}>\n                    {recent?.data[0]?.category?.name}\n                  </span>\n                </div>\n                </div>\n              </div>\n            }\n\n            {recent?.data.length > 0 &&\n              <h2 className={`text-left text-black pt-5 mt-3`}>All Latest articles</h2>\n            }\n\n            <div className=\"row\">\n              {recent?.data &&\n                (recent?.data.length > 0 ?\n                  recent?.data.map(blogpost => (\n                    <div className=\"col-md-12 mt-4\" key={blogpost.id}>\n                      <MainBlogItem item={blogpost} navigateToItem={this.handleNavigateToPost} />\n                    </div>\n                  ))\n                  :\n                  <div className=\"text-center\">\n                    No recent topics\n            </div>)\n              }\n            </div>\n            {recent?.data &&\n              <div className=\"text-center mt-4 mb-4\">\n                {recent?.data.length !== recent?.total &&\n                  <button className=\"btn btn-stroke-black btn-sm text-center\" onClick={this.handleLoadMore}>\n                    Load more\n              {loading &&\n                      <div className=\"spinner-border text-black spinner-border-sm ml-2\"></div>\n                    }\n                  </button>\n                }\n              </div>\n            }\n          </>\n        }\n        {search !== '' &&\n          <>\n            <h3 className=\"text-center text-blue text-medium mb-3\">Search Results</h3>\n            {searchloading &&\n              <div className=\"text-center\">\n                <div className=\"spinner-border text-blue spinner-border-md ml-2\"></div>\n              </div>\n            }\n            <div className=\"row\">\n              {filter &&\n                (filter?.posts?.data.length > 0 ?\n                  filter?.posts?.data.map(blogpost => (\n                    <div className=\"col-md-4\" key={blogpost.id}>\n                      <BlogItem item={blogpost} navigateToItem={this.handleNavigateToPost} />\n                    </div>\n                  ))\n                  :\n                  <div className=\"text-center w-100 mt-5\">\n                    <p className=\"text-grey mt-5\">No results for {search}</p>\n                  </div>\n                )\n              }\n            </div>\n            {filter?.posts?.total > filter?.posts?.data.length &&\n              <div className=\"text-center mt-4\">\n                <button className=\"btn btn-stroke-black btn-sm text-center\" onClick={this.loadMoreSearch}>\n                  Load more\n                </button>\n              </div>\n            }\n          </>\n        }\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  const { app: {\n    blog: { recent, filter }\n  } } = state;\n\n  return {\n    loading: getActionLoadingState(state, actionTypes.GET_RECENT_POSTS_REQUEST),\n    searchloading: getActionLoadingState(state, actionTypes.FILTER_POSTS_REQUEST),\n    recent,\n    filter\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    getRecentPosts: (limit, page) => dispatch(getRecentPosts(limit, page)),\n    filterPosts: (search, limit, page) => dispatch(filterPosts(search, limit, page)),\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(LatestInsights));"]},"metadata":{},"sourceType":"module"}