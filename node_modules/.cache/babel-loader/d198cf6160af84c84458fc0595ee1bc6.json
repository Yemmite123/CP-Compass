{"ast":null,"code":"var _jsxFileName = \"/Users/adebayooluyemi/Documents/THE BULB/cpinvest-app/cpinvest-app/src/pages/App/Onboarding/VerifyIdentity/index.js\";\nimport React from 'react';\nimport moment from 'moment';\nimport { connect } from 'react-redux';\nimport { withRouter, Link } from 'react-router-dom';\nimport Textbox from '#/components/Textbox';\nimport Alert from '#/components/Alert';\nimport DateBox from '#/components/DateBox';\nimport { getActionLoadingState } from \"#/store/selectors\";\nimport actionTypes from \"#/store/onboarding/actionTypes\";\nimport { verifyIdentity } from '#/store/onboarding/actions';\nimport { validateFields, serializeErrors } from '#/utils';\nimport './style.scss';\n\nclass VerifyIdentity extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      bvn: '',\n      dob: '',\n      errors: null\n    };\n\n    this.handleChange = event => {\n      const {\n        name,\n        value\n      } = event.target;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.handleChangeDate = (item, date) => {\n      this.setState({\n        [item]: date\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      const {\n        verifyIdentity,\n        history\n      } = this.props;\n      const {\n        dob,\n        bvn\n      } = this.state;\n      this.setState({\n        errors: null\n      });\n      const data = this.state;\n      const required = ['dob', 'bvn'];\n      const errors = validateFields(data, required);\n\n      if (Object.keys(errors).length > 0) {\n        return this.setState({\n          errors\n        });\n      }\n\n      const payload = {\n        dateOfBirth: moment(dob).format('YYYY-MM-DD'),\n        bvn\n      };\n      verifyIdentity(payload, history);\n    };\n  }\n\n  render() {\n    const {\n      dob,\n      bvn,\n      errors\n    } = this.state;\n    const {\n      error,\n      loading\n    } = this.props;\n    const errorObject = serializeErrors(error);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"verify-identity-page text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }\n    }, \"ACCOUNT SETUP\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"mt-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 13\n      }\n    }, \"Verify your identity\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 13\n      }\n    }, \"Please provide your Bank Verification Number (BVN) and date of birth to verify your identity and validate your profile.\"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Textbox, {\n      onChange: this.handleChange,\n      name: \"bvn\",\n      value: bvn,\n      label: \"BVN\",\n      placeholder: \"BVN\",\n      boxClasses: \"mt-2\",\n      error: errors ? errors.bvn : errorObject && errorObject['bvn'],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(DateBox, {\n      onChange: date => this.handleChangeDate('dob', date),\n      label: \"Date of birth\",\n      placeholder: \"Date of birth\",\n      name: \"dob\",\n      value: dob,\n      boxClasses: \"mt-2\",\n      error: errors ? errors.dob : errorObject && errorObject['dateOfBirth'],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-sm btn-primary w-100 mt-3\",\n      disabled: loading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 15\n      }\n    }, \"Validate BVN\", loading && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"spinner-border spinner-border-white spinner-border-sm ml-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 19\n      }\n    }))), error && /*#__PURE__*/React.createElement(Alert, {\n      alert: {\n        type: 'danger',\n        message: error\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mt-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/app/onboarding/verify-identity-manually\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 67\n      }\n    }, \"Verify BVN manually\"))))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  const {\n    app: {\n      onboarding: {\n        error\n      }\n    }\n  } = state;\n  return {\n    loading: getActionLoadingState(state, actionTypes.VERIFY_IDENTITY_REQUEST),\n    error\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    verifyIdentity: (payload, history) => dispatch(verifyIdentity(payload, history))\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(VerifyIdentity));","map":{"version":3,"sources":["/Users/adebayooluyemi/Documents/THE BULB/cpinvest-app/cpinvest-app/src/pages/App/Onboarding/VerifyIdentity/index.js"],"names":["React","moment","connect","withRouter","Link","Textbox","Alert","DateBox","getActionLoadingState","actionTypes","verifyIdentity","validateFields","serializeErrors","VerifyIdentity","Component","state","bvn","dob","errors","handleChange","event","name","value","target","setState","handleChangeDate","item","date","handleSubmit","preventDefault","history","props","data","required","Object","keys","length","payload","dateOfBirth","format","render","error","loading","errorObject","type","message","mapStateToProps","app","onboarding","VERIFY_IDENTITY_REQUEST","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from 'react';\nimport moment from 'moment';\nimport { connect } from 'react-redux';\nimport { withRouter, Link } from 'react-router-dom';\nimport Textbox from '#/components/Textbox';\nimport Alert from '#/components/Alert';\nimport DateBox from '#/components/DateBox';\nimport { getActionLoadingState } from \"#/store/selectors\";\nimport actionTypes from \"#/store/onboarding/actionTypes\";\nimport { verifyIdentity } from '#/store/onboarding/actions';\nimport { validateFields, serializeErrors } from '#/utils';\nimport './style.scss';\n\nclass VerifyIdentity extends React.Component {\n\n  state = {\n    bvn: '',\n    dob: '',\n    errors: null,\n  }\n\n  handleChange = (event) => {\n    const { name, value } = event.target\n    this.setState({ [name]: value })\n  }\n\n  handleChangeDate = (item, date) => {\n    this.setState({ [item]: date });\n  }\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n\n    const { verifyIdentity, history } = this.props;\n    const { dob, bvn } = this.state;\n\n    this.setState({ errors: null });\n\n    const data = this.state;\n    const required = [ 'dob', 'bvn'];\n    const errors = validateFields(data, required)\n\n    if (Object.keys(errors).length > 0) {\n      return this.setState({ errors });\n    }\n    const payload = { dateOfBirth: moment(dob).format('YYYY-MM-DD'), bvn };\n    verifyIdentity(payload, history);\n  }\n\n  render() {\n    const { dob, bvn, errors } = this.state;\n    const { error, loading } = this.props;\n    const errorObject = serializeErrors(error);\n\n    return (\n      <div className=\"verify-identity-page text-center\">\n        <h3>ACCOUNT SETUP</h3>\n        <div className=\"box\">\n          <div className=\"container\">\n            <h3 className=\"mt-3\">Verify your identity</h3>\n            <p>Please provide your Bank Verification Number (BVN) and date of birth to verify your identity and validate your profile.</p>\n            <form onSubmit={this.handleSubmit}>\n              <Textbox\n                onChange={this.handleChange}\n                name=\"bvn\"\n                value={bvn}\n                label=\"BVN\"\n                placeholder=\"BVN\"\n                boxClasses=\"mt-2\"\n                error={errors ? errors.bvn : (errorObject && errorObject['bvn'])}\n              />\n                <DateBox\n                  onChange={date => this.handleChangeDate('dob', date)}\n                  label=\"Date of birth\"\n                  placeholder=\"Date of birth\"\n                  name=\"dob\"\n                  value={dob}\n                  boxClasses=\"mt-2\"\n                  error={errors ? errors.dob : (errorObject && errorObject['dateOfBirth'])}\n                />\n              <button className=\"btn btn-sm btn-primary w-100 mt-3\" disabled={loading}>\n                Validate BVN\n                {loading &&\n                  <div className=\"spinner-border spinner-border-white spinner-border-sm ml-2\"></div>\n                }\n              </button>\n            </form>\n            {error && <Alert alert={{ type: 'danger', message: error }}/>}\n            <div className=\"mt-3\">\n              <Link to='/app/onboarding/verify-identity-manually'><b>Verify BVN manually</b></Link>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  const { app: { onboarding: { error } } } = state;\n\n  return {\n    loading: getActionLoadingState(state, actionTypes.VERIFY_IDENTITY_REQUEST),\n    error,\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    verifyIdentity: (payload, history) => dispatch(verifyIdentity(payload, history)),\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(VerifyIdentity));\n"]},"metadata":{},"sourceType":"module"}