{"ast":null,"code":"var _jsxFileName = \"/Users/adebayooluyemi/Documents/THE BULB/cpinvest-app/cpinvest-app/src/pages/Register/Signup/index.js\";\nimport React from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport { connect } from \"react-redux\";\nimport PasswordStrengthBar from 'react-password-strength-bar';\nimport CONFIG from '#/config';\nimport Textbox from '#/components/Textbox';\nimport Alert from '#/components/Alert';\nimport PhoneTextbox from '#/components/PhoneTextBox';\nimport { getActionLoadingState } from \"#/store/selectors\";\nimport { register } from \"#/store/register/actions\";\nimport actionTypes from \"#/store/register/actionTypes\";\nimport { validateFields, isPasswordEqual, serializeErrors } from '#/utils';\nimport './style.scss';\nimport { countryCodes } from '#/utils/countryCode';\n\nclass Signup extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      email: '',\n      phoneNumber: '',\n      password: '',\n      confirm: '',\n      showSignal: false,\n      errors: null,\n      passwordType: 'password',\n      conPasswordType: 'password',\n      countryCode: '+234'\n    };\n\n    this.handleChange = event => {\n      const {\n        errors\n      } = this.state;\n      const {\n        name,\n        value\n      } = event.target;\n      this.setState({\n        [name]: value\n      }, () => {\n        if (name === 'confirm') {\n          const error = isPasswordEqual(this.state.confirm, this.state.password);\n\n          if (!error) {\n            return this.setState({\n              errors: { ...errors,\n                confirm: null\n              }\n            });\n          }\n\n          return this.setState({\n            errors: { ...errors,\n              ...error\n            }\n          });\n        }\n      });\n\n      if (name === 'password') {\n        return this.setState({\n          showSignal: true\n        });\n      }\n    };\n\n    this.handlePasswordType = () => {\n      const {\n        passwordType\n      } = this.state;\n\n      if (passwordType === 'password') {\n        return this.setState({\n          passwordType: 'text'\n        });\n      }\n\n      return this.setState({\n        passwordType: 'password'\n      });\n    };\n\n    this.handleConPasswordType = () => {\n      const {\n        conPasswordType\n      } = this.state;\n\n      if (conPasswordType === 'password') {\n        return this.setState({\n          conPasswordType: 'text'\n        });\n      }\n\n      return this.setState({\n        conPasswordType: 'password'\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      this.setState({\n        errors: null\n      });\n      const {\n        registerUser,\n        history\n      } = this.props;\n      const {\n        email,\n        phoneNumber,\n        password,\n        errors,\n        countryCode\n      } = this.state;\n      const error = isPasswordEqual(this.state.confirm, this.state.password);\n\n      if (error) {\n        return this.setState({\n          errors: { ...errors,\n            ...error\n          }\n        });\n      }\n\n      const data = this.state;\n      const required = ['email', 'password', 'phoneNumber', 'confirm'];\n      const validateErrors = validateFields(data, required);\n\n      if (Object.keys(validateErrors).length > 0) {\n        return this.setState({\n          errors: validateErrors\n        });\n      }\n\n      const payload = {\n        email,\n        phone: phoneNumber,\n        password,\n        countryCode\n      };\n      registerUser(payload, history);\n    };\n  }\n\n  render() {\n    const {\n      email,\n      phoneNumber,\n      password,\n      confirm,\n      showSignal,\n      errors,\n      passwordType,\n      conPasswordType,\n      countryCode\n    } = this.state;\n    const {\n      loading,\n      error,\n      data\n    } = this.props;\n    const errorObject = serializeErrors(error);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"register-page vh-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box ml-auto mr-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row no-gutters\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-section\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      style: {\n        marginBottom: '3%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 19\n      }\n    }, \"Sign up with CPCompass\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 19\n      }\n    }, \"Start your journey into financial freedom\")), /*#__PURE__*/React.createElement(\"form\", {\n      className: \"form\",\n      autoComplete: \"off\",\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }\n    }, data && /*#__PURE__*/React.createElement(Alert, {\n      alert: {\n        type: 'success',\n        message: data.message\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 26\n      }\n    }), /*#__PURE__*/React.createElement(Textbox, {\n      onChange: this.handleChange,\n      name: \"email\",\n      value: email,\n      label: \"First Name\",\n      placeholder: \"First Name\",\n      boxClasses: \"mt-2\",\n      error: errors ? errors.email : errorObject && errorObject['email'],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Textbox, {\n      onChange: this.handleChange,\n      name: \"email\",\n      value: email,\n      label: \"Last Name\",\n      placeholder: \"Last Name\",\n      boxClasses: \"mt-2\",\n      error: errors ? errors.email : errorObject && errorObject['email'],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Textbox, {\n      onChange: this.handleChange,\n      name: \"email\",\n      value: email,\n      label: \"Email\",\n      placeholder: \"Email address\",\n      boxClasses: \"mt-2\",\n      error: errors ? errors.email : errorObject && errorObject['email'],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(PhoneTextbox, {\n      onChange: this.handleChange,\n      name: \"phoneNumber\",\n      value: phoneNumber,\n      label: \"Phone number\",\n      placeholder: \"Phone number\",\n      boxClasses: \"mt-2\",\n      options: countryCodes,\n      onChangeSelect: this.handleChange,\n      selectName: \"countryCode\",\n      defaultValue: countryCode,\n      type: \"number\",\n      error: errors ? errors.phoneNumber : errorObject && errorObject['phone'],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(Textbox, {\n      onChange: this.handleChange,\n      name: \"password\",\n      value: password,\n      label: \"Password\",\n      placeholder: \"Password\",\n      boxClasses: \"mt-2\",\n      type: passwordType,\n      iconUrl: require(\"#/assets/icons/view-password.svg\"),\n      onIconClick: this.handlePasswordType,\n      error: errors ? errors.password : errorObject && errorObject['password'],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(PasswordStrengthBar, {\n      password: password,\n      className: `${showSignal ? 'd-block' : 'd-none'} mt-2`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(Textbox, {\n      onChange: this.handleChange,\n      name: \"confirm\",\n      value: confirm,\n      label: \"Confirm password\",\n      placeholder: \"Confirm Password\",\n      boxClasses: \"mt-2\",\n      type: conPasswordType,\n      iconUrl: require(\"#/assets/icons/view-password.svg\"),\n      onIconClick: this.handleConPasswordType,\n      error: errors && errors.confirm,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"w-100 btn btn-md btn-primary mt-3\",\n      onClick: this.handleSubmit,\n      disabled: loading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 19\n      }\n    }, \"Create Account\", loading && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"spinner-border spinner-border-white spinner-border-sm ml-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 23\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"notice mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"w-75 text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 19\n      }\n    }, \"Creating a CPCompass account means you agree to our\", /*#__PURE__*/React.createElement(\"a\", {\n      style: {\n        color: 'red'\n      },\n      href: `${CONFIG.WEBSITE_URL}/cookiesPolicy`,\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 25\n      }\n    }, \" \"), \"Privacy Policy\"), \" and\", /*#__PURE__*/React.createElement(\"a\", {\n      href: `${CONFIG.WEBSITE_URL}/termsAndConditions`,\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 23\n      }\n    }, \" \"), \"Terms of Service\"))), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sign-in mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 19\n      }\n    }, \"Have an account already? \", /*#__PURE__*/React.createElement(Link, {\n      to: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 47\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 65\n      }\n    }, \"Sign in\")))))))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  const {\n    auth: {\n      register: {\n        error,\n        data\n      }\n    }\n  } = state;\n  return {\n    loading: getActionLoadingState(state, actionTypes.REGISTER_REQUEST),\n    error,\n    data\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    registerUser: (payload, history) => dispatch(register(payload, history))\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Signup));","map":{"version":3,"sources":["/Users/adebayooluyemi/Documents/THE BULB/cpinvest-app/cpinvest-app/src/pages/Register/Signup/index.js"],"names":["React","Link","withRouter","connect","PasswordStrengthBar","CONFIG","Textbox","Alert","PhoneTextbox","getActionLoadingState","register","actionTypes","validateFields","isPasswordEqual","serializeErrors","countryCodes","Signup","Component","state","email","phoneNumber","password","confirm","showSignal","errors","passwordType","conPasswordType","countryCode","handleChange","event","name","value","target","setState","error","handlePasswordType","handleConPasswordType","handleSubmit","preventDefault","registerUser","history","props","data","required","validateErrors","Object","keys","length","payload","phone","render","loading","errorObject","marginBottom","type","message","require","color","WEBSITE_URL","mapStateToProps","auth","REGISTER_REQUEST","mapDispatchToProps","dispatch"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,IAAT,EAAeC,UAAf,QAAiC,kBAAjC;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,mBAAP,MAAgC,6BAAhC;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,OAAP,MAAoB,sBAApB;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,OAAOC,YAAP,MAAyB,2BAAzB;AACA,SAASC,qBAAT,QAAsC,mBAAtC;AACA,SAASC,QAAT,QAA0B,0BAA1B;AACA,OAAOC,WAAP,MAAwB,8BAAxB;AACA,SAASC,cAAT,EAAyBC,eAAzB,EAA0CC,eAA1C,QAAiE,SAAjE;AACA,OAAO,cAAP;AACA,SAASC,YAAT,QAA6B,qBAA7B;;AAEA,MAAMC,MAAN,SAAqBhB,KAAK,CAACiB,SAA3B,CAAqC;AAAA;AAAA;AAAA,SACnCC,KADmC,GAC3B;AACNC,MAAAA,KAAK,EAAE,EADD;AAENC,MAAAA,WAAW,EAAE,EAFP;AAGNC,MAAAA,QAAQ,EAAE,EAHJ;AAINC,MAAAA,OAAO,EAAE,EAJH;AAKNC,MAAAA,UAAU,EAAE,KALN;AAMNC,MAAAA,MAAM,EAAE,IANF;AAONC,MAAAA,YAAY,EAAE,UAPR;AAQNC,MAAAA,eAAe,EAAE,UARX;AASNC,MAAAA,WAAW,EAAE;AATP,KAD2B;;AAAA,SAanCC,YAbmC,GAanBC,KAAD,IAAW;AACxB,YAAM;AAAEL,QAAAA;AAAF,UAAa,KAAKN,KAAxB;AACA,YAAM;AAAEY,QAAAA,IAAF;AAAQC,QAAAA;AAAR,UAAkBF,KAAK,CAACG,MAA9B;AAEA,WAAKC,QAAL,CAAc;AAAE,SAACH,IAAD,GAAQC;AAAV,OAAd,EAAiC,MAAM;AACrC,YAAID,IAAI,KAAK,SAAb,EAAwB;AACtB,gBAAMI,KAAK,GAAGrB,eAAe,CAAC,KAAKK,KAAL,CAAWI,OAAZ,EAAqB,KAAKJ,KAAL,CAAWG,QAAhC,CAA7B;;AACA,cAAG,CAACa,KAAJ,EAAW;AACT,mBAAO,KAAKD,QAAL,CAAc;AAAET,cAAAA,MAAM,EAAE,EAAE,GAAGA,MAAL;AAAaF,gBAAAA,OAAO,EAAE;AAAtB;AAAV,aAAd,CAAP;AACD;;AACD,iBAAO,KAAKW,QAAL,CAAc;AAAET,YAAAA,MAAM,EAAE,EAAE,GAAGA,MAAL;AAAa,iBAAGU;AAAhB;AAAV,WAAd,CAAP;AACD;AACF,OARD;;AAUA,UAAIJ,IAAI,KAAK,UAAb,EAAyB;AACvB,eAAO,KAAKG,QAAL,CAAc;AAAEV,UAAAA,UAAU,EAAE;AAAd,SAAd,CAAP;AACD;AACF,KA9BkC;;AAAA,SAgCnCY,kBAhCmC,GAgCd,MAAM;AACzB,YAAM;AAAEV,QAAAA;AAAF,UAAmB,KAAKP,KAA9B;;AACA,UAAIO,YAAY,KAAK,UAArB,EAAiC;AAC/B,eAAO,KAAKQ,QAAL,CAAc;AAAER,UAAAA,YAAY,EAAE;AAAhB,SAAd,CAAP;AACD;;AACD,aAAO,KAAKQ,QAAL,CAAc;AAAER,QAAAA,YAAY,EAAE;AAAhB,OAAd,CAAP;AACD,KAtCkC;;AAAA,SAwCnCW,qBAxCmC,GAwCX,MAAM;AAC5B,YAAM;AAAEV,QAAAA;AAAF,UAAsB,KAAKR,KAAjC;;AACA,UAAIQ,eAAe,KAAK,UAAxB,EAAoC;AAClC,eAAO,KAAKO,QAAL,CAAc;AAAEP,UAAAA,eAAe,EAAE;AAAnB,SAAd,CAAP;AACD;;AACD,aAAO,KAAKO,QAAL,CAAc;AAAEP,QAAAA,eAAe,EAAE;AAAnB,OAAd,CAAP;AACD,KA9CkC;;AAAA,SAgDnCW,YAhDmC,GAgDnBR,KAAD,IAAW;AACxBA,MAAAA,KAAK,CAACS,cAAN;AAEA,WAAKL,QAAL,CAAc;AAAET,QAAAA,MAAM,EAAE;AAAV,OAAd;AACA,YAAM;AAAEe,QAAAA,YAAF;AAAgBC,QAAAA;AAAhB,UAA4B,KAAKC,KAAvC;AACA,YAAM;AAAEtB,QAAAA,KAAF;AAASC,QAAAA,WAAT;AAAsBC,QAAAA,QAAtB;AAAgCG,QAAAA,MAAhC;AAAwCG,QAAAA;AAAxC,UAAwD,KAAKT,KAAnE;AAEA,YAAMgB,KAAK,GAAGrB,eAAe,CAAC,KAAKK,KAAL,CAAWI,OAAZ,EAAqB,KAAKJ,KAAL,CAAWG,QAAhC,CAA7B;;AACA,UAAIa,KAAJ,EAAW;AACT,eAAO,KAAKD,QAAL,CAAc;AAAET,UAAAA,MAAM,EAAE,EAAE,GAAGA,MAAL;AAAa,eAAGU;AAAhB;AAAV,SAAd,CAAP;AACD;;AAED,YAAMQ,IAAI,GAAG,KAAKxB,KAAlB;AACA,YAAMyB,QAAQ,GAAG,CAAE,OAAF,EAAW,UAAX,EAAuB,aAAvB,EAAsC,SAAtC,CAAjB;AACA,YAAMC,cAAc,GAAGhC,cAAc,CAAC8B,IAAD,EAAOC,QAAP,CAArC;;AAEA,UAAIE,MAAM,CAACC,IAAP,CAAYF,cAAZ,EAA4BG,MAA5B,GAAqC,CAAzC,EAA4C;AAC1C,eAAO,KAAKd,QAAL,CAAc;AAAET,UAAAA,MAAM,EAAEoB;AAAV,SAAd,CAAP;AACD;;AACD,YAAMI,OAAO,GAAG;AAAE7B,QAAAA,KAAF;AAAS8B,QAAAA,KAAK,EAAE7B,WAAhB;AAA6BC,QAAAA,QAA7B;AAAuCM,QAAAA;AAAvC,OAAhB;AACAY,MAAAA,YAAY,CAACS,OAAD,EAAUR,OAAV,CAAZ;AACD,KArEkC;AAAA;;AAuEnCU,EAAAA,MAAM,GAAI;AACR,UAAM;AAAE/B,MAAAA,KAAF;AAASC,MAAAA,WAAT;AAAsBC,MAAAA,QAAtB;AAAgCC,MAAAA,OAAhC;AAAyCC,MAAAA,UAAzC;AAAqDC,MAAAA,MAArD;AAA6DC,MAAAA,YAA7D;AAA2EC,MAAAA,eAA3E;AAA4FC,MAAAA;AAA5F,QAA4G,KAAKT,KAAvH;AACA,UAAM;AAAEiC,MAAAA,OAAF;AAAWjB,MAAAA,KAAX;AAAkBQ,MAAAA;AAAlB,QAA2B,KAAKD,KAAtC;AACA,UAAMW,WAAW,GAAGtC,eAAe,CAACoB,KAAD,CAAnC;AAEA,wBACE;AAAK,MAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAGE;AAAK,MAAA,SAAS,EAAC,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAI,MAAA,KAAK,EAAE;AAACmB,QAAAA,YAAY,EAAE;AAAf,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mDAFF,CADF,eAKE;AAAM,MAAA,SAAS,EAAC,MAAhB;AAAuB,MAAA,YAAY,EAAC,KAApC;AAA0C,MAAA,QAAQ,EAAE,KAAKhB,YAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACCK,IAAI,iBAAI,oBAAC,KAAD;AAAO,MAAA,KAAK,EAAE;AAAEY,QAAAA,IAAI,EAAE,SAAR;AAAmBC,QAAAA,OAAO,EAAEb,IAAI,CAACa;AAAjC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADT,eAEA,oBAAC,OAAD;AACI,MAAA,QAAQ,EAAE,KAAK3B,YADnB;AAEI,MAAA,IAAI,EAAC,OAFT;AAGI,MAAA,KAAK,EAAET,KAHX;AAII,MAAA,KAAK,EAAC,YAJV;AAKI,MAAA,WAAW,EAAC,YALhB;AAMI,MAAA,UAAU,EAAC,MANf;AAOI,MAAA,KAAK,EAAEK,MAAM,GAAGA,MAAM,CAACL,KAAV,GAAmBiC,WAAW,IAAIA,WAAW,CAAC,OAAD,CAP9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFA,eAWI,oBAAC,OAAD;AACA,MAAA,QAAQ,EAAE,KAAKxB,YADf;AAEA,MAAA,IAAI,EAAC,OAFL;AAGA,MAAA,KAAK,EAAET,KAHP;AAIA,MAAA,KAAK,EAAC,WAJN;AAKA,MAAA,WAAW,EAAC,WALZ;AAMA,MAAA,UAAU,EAAC,MANX;AAOA,MAAA,KAAK,EAAEK,MAAM,GAAGA,MAAM,CAACL,KAAV,GAAmBiC,WAAW,IAAIA,WAAW,CAAC,OAAD,CAP1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAXJ,eAoBE,oBAAC,OAAD;AACE,MAAA,QAAQ,EAAE,KAAKxB,YADjB;AAEE,MAAA,IAAI,EAAC,OAFP;AAGE,MAAA,KAAK,EAAET,KAHT;AAIE,MAAA,KAAK,EAAC,OAJR;AAKE,MAAA,WAAW,EAAC,eALd;AAME,MAAA,UAAU,EAAC,MANb;AAOE,MAAA,KAAK,EAAEK,MAAM,GAAGA,MAAM,CAACL,KAAV,GAAmBiC,WAAW,IAAIA,WAAW,CAAC,OAAD,CAP5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MApBF,eA6BE,oBAAC,YAAD;AACE,MAAA,QAAQ,EAAE,KAAKxB,YADjB;AAEE,MAAA,IAAI,EAAC,aAFP;AAGE,MAAA,KAAK,EAAER,WAHT;AAIE,MAAA,KAAK,EAAC,cAJR;AAKE,MAAA,WAAW,EAAC,cALd;AAME,MAAA,UAAU,EAAC,MANb;AAOE,MAAA,OAAO,EAAEL,YAPX;AAQE,MAAA,cAAc,EAAE,KAAKa,YARvB;AASE,MAAA,UAAU,EAAC,aATb;AAUE,MAAA,YAAY,EAAED,WAVhB;AAWE,MAAA,IAAI,EAAC,QAXP;AAYE,MAAA,KAAK,EAAEH,MAAM,GAAGA,MAAM,CAACJ,WAAV,GAAyBgC,WAAW,IAAIA,WAAW,CAAC,OAAD,CAZlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA7BF,eA2CE,oBAAC,OAAD;AACE,MAAA,QAAQ,EAAE,KAAKxB,YADjB;AAEE,MAAA,IAAI,EAAC,UAFP;AAGE,MAAA,KAAK,EAAEP,QAHT;AAIE,MAAA,KAAK,EAAC,UAJR;AAKE,MAAA,WAAW,EAAC,UALd;AAME,MAAA,UAAU,EAAC,MANb;AAOE,MAAA,IAAI,EAAEI,YAPR;AAQE,MAAA,OAAO,EAAE+B,OAAO,CAAC,kCAAD,CARlB;AASE,MAAA,WAAW,EAAE,KAAKrB,kBATpB;AAUE,MAAA,KAAK,EAAEX,MAAM,GAAGA,MAAM,CAACH,QAAV,GAAsB+B,WAAW,IAAIA,WAAW,CAAC,UAAD,CAV/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA3CF,eAuDE,oBAAC,mBAAD;AAAqB,MAAA,QAAQ,EAAE/B,QAA/B;AAAyC,MAAA,SAAS,EAAG,GAAEE,UAAU,GAAG,SAAH,GAAe,QAAS,OAAzF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAvDF,eAwDE,oBAAC,OAAD;AACE,MAAA,QAAQ,EAAE,KAAKK,YADjB;AAEE,MAAA,IAAI,EAAC,SAFP;AAGE,MAAA,KAAK,EAAEN,OAHT;AAIE,MAAA,KAAK,EAAC,kBAJR;AAKE,MAAA,WAAW,EAAC,kBALd;AAME,MAAA,UAAU,EAAC,MANb;AAOE,MAAA,IAAI,EAAEI,eAPR;AAQE,MAAA,OAAO,EAAE8B,OAAO,CAAC,kCAAD,CARlB;AASE,MAAA,WAAW,EAAE,KAAKpB,qBATpB;AAUE,MAAA,KAAK,EAAEZ,MAAM,IAAIA,MAAM,CAACF,OAV1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAxDF,eAoEE;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,SAAS,EAAC,mCAAhC;AAAoE,MAAA,OAAO,EAAE,KAAKe,YAAlF;AAAgG,MAAA,QAAQ,EAAEc,OAA1G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAEGA,OAAO,iBACN;AAAK,MAAA,SAAS,EAAC,4DAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHJ,CApEF,CALF,eAgFE;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAG,MAAA,SAAS,EAAC,kBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2EAEI;AAAG,MAAA,KAAK,EAAE;AAACM,QAAAA,KAAK,EAAC;AAAP,OAAV;AAAyB,MAAA,IAAI,EAAG,GAAEpD,MAAM,CAACqD,WAAY,gBAArD;AAAsE,MAAA,MAAM,EAAC,QAA7E;AAAsF,MAAA,GAAG,EAAC,qBAA1F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WADF,mBAFJ,uBAKI;AAAG,MAAA,IAAI,EAAG,GAAErD,MAAM,CAACqD,WAAY,qBAA/B;AAAqD,MAAA,MAAM,EAAC,QAA5D;AAAqE,MAAA,GAAG,EAAC,qBAAzE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WADA,qBALJ,CADF,CAhFF,eA2FE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA3FF,eA4FE;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iDAA4B,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,QAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAlB,CAA5B,CADF,CA5FF,CADF,CAHF,CADF,CADF,CADF;AA4GD;;AAxLkC;;AA2LrC,MAAMC,eAAe,GAAIzC,KAAD,IAAW;AACjC,QAAM;AAAE0C,IAAAA,IAAI,EAAE;AAAElD,MAAAA,QAAQ,EAAE;AAAEwB,QAAAA,KAAF;AAASQ,QAAAA;AAAT;AAAZ;AAAR,MAA0CxB,KAAhD;AACA,SAAO;AACLiC,IAAAA,OAAO,EAAE1C,qBAAqB,CAACS,KAAD,EAAQP,WAAW,CAACkD,gBAApB,CADzB;AAEL3B,IAAAA,KAFK;AAGLQ,IAAAA;AAHK,GAAP;AAKD,CAPD;;AASA,MAAMoB,kBAAkB,GAAIC,QAAD,IAAc;AACvC,SAAO;AACLxB,IAAAA,YAAY,EAAE,CAACS,OAAD,EAAUR,OAAV,KAAsBuB,QAAQ,CAACrD,QAAQ,CAACsC,OAAD,EAAUR,OAAV,CAAT;AADvC,GAAP;AAGD,CAJD;;AAMA,eAAetC,UAAU,CAACC,OAAO,CAACwD,eAAD,EAAkBG,kBAAlB,CAAP,CAA6C9C,MAA7C,CAAD,CAAzB","sourcesContent":["import React from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport { connect } from \"react-redux\";\nimport PasswordStrengthBar from 'react-password-strength-bar';\nimport CONFIG from '#/config';\nimport Textbox from '#/components/Textbox';\nimport Alert from '#/components/Alert';\nimport PhoneTextbox from '#/components/PhoneTextBox';\nimport { getActionLoadingState } from \"#/store/selectors\";\nimport { register  } from \"#/store/register/actions\";\nimport actionTypes from \"#/store/register/actionTypes\";\nimport { validateFields, isPasswordEqual, serializeErrors } from '#/utils';\nimport './style.scss';\nimport { countryCodes } from '#/utils/countryCode';\n\nclass Signup extends React.Component {\n  state = {\n    email: '',\n    phoneNumber: '',\n    password: '',\n    confirm: '',\n    showSignal: false,\n    errors: null,\n    passwordType: 'password',\n    conPasswordType: 'password',\n    countryCode: '+234'\n  }\n\n  handleChange = (event) => {\n    const { errors } = this.state\n    const { name, value } = event.target\n\n    this.setState({ [name]: value }, () => {\n      if( name === 'confirm') {\n        const error = isPasswordEqual(this.state.confirm, this.state.password);\n        if(!error) {\n          return this.setState({ errors: { ...errors, confirm: null }})\n        }\n        return this.setState({ errors: { ...errors, ...error }})\n      }\n    });\n\n    if (name === 'password') {\n      return this.setState({ showSignal: true})\n    }\n  }\n\n  handlePasswordType = () => {\n    const { passwordType } = this.state;\n    if (passwordType === 'password') {\n      return this.setState({ passwordType: 'text'})\n    }\n    return this.setState({ passwordType: 'password'})\n  }\n\n  handleConPasswordType = () => {\n    const { conPasswordType } = this.state;\n    if (conPasswordType === 'password') {\n      return this.setState({ conPasswordType: 'text'})\n    }\n    return this.setState({ conPasswordType: 'password'})\n  }\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n\n    this.setState({ errors: null });\n    const { registerUser, history } = this.props;\n    const { email, phoneNumber, password, errors, countryCode } = this.state;\n\n    const error = isPasswordEqual(this.state.confirm, this.state.password);\n    if (error) {\n      return this.setState({ errors: { ...errors, ...error }})\n    }\n\n    const data = this.state;\n    const required = [ 'email', 'password', 'phoneNumber', 'confirm'];\n    const validateErrors = validateFields(data, required)\n\n    if (Object.keys(validateErrors).length > 0) {\n      return this.setState({ errors: validateErrors });\n    }\n    const payload = { email, phone: phoneNumber, password, countryCode };\n    registerUser(payload, history);\n  }\n\n  render () {\n    const { email, phoneNumber, password, confirm, showSignal, errors, passwordType, conPasswordType, countryCode } = this.state;\n    const { loading, error, data } = this.props;\n    const errorObject = serializeErrors(error);\n    \n    return (\n      <div className=\"register-page vh-100\">\n        <div className=\"box ml-auto mr-auto\">\n          <div className=\"row no-gutters\">\n            {/* <div className=\"col-md-1 left-section\">\n            </div> */}\n            <div className=\"col-md-12 text-center\">\n              <div className=\"form-section\">\n                <div>\n                  <h3 style={{marginBottom: '3%'}}>Sign up with CPCompass</h3>\n                  <p>Start your journey into financial freedom</p>\n                </div>\n                <form className=\"form\" autoComplete=\"off\" onSubmit={this.handleSubmit}>\n                {data && <Alert alert={{ type: 'success', message: data.message }}/>}\n                <Textbox\n                    onChange={this.handleChange}\n                    name=\"email\"\n                    value={email}\n                    label=\"First Name\"\n                    placeholder=\"First Name\"\n                    boxClasses=\"mt-2\"\n                    error={errors ? errors.email : (errorObject && errorObject['email'])}\n                  />\n                    <Textbox\n                    onChange={this.handleChange}\n                    name=\"email\"\n                    value={email}\n                    label=\"Last Name\"\n                    placeholder=\"Last Name\"\n                    boxClasses=\"mt-2\"\n                    error={errors ? errors.email : (errorObject && errorObject['email'])}\n                  />\n                  <Textbox\n                    onChange={this.handleChange}\n                    name=\"email\"\n                    value={email}\n                    label=\"Email\"\n                    placeholder=\"Email address\"\n                    boxClasses=\"mt-2\"\n                    error={errors ? errors.email : (errorObject && errorObject['email'])}\n                  />\n                  <PhoneTextbox \n                    onChange={this.handleChange}\n                    name=\"phoneNumber\"\n                    value={phoneNumber}\n                    label=\"Phone number\"\n                    placeholder=\"Phone number\"\n                    boxClasses=\"mt-2\"\n                    options={countryCodes}\n                    onChangeSelect={this.handleChange}\n                    selectName=\"countryCode\"\n                    defaultValue={countryCode}\n                    type=\"number\"\n                    error={errors ? errors.phoneNumber : (errorObject && errorObject['phone'])}\n                  />\n                  <Textbox\n                    onChange={this.handleChange}\n                    name=\"password\"\n                    value={password}\n                    label=\"Password\"\n                    placeholder=\"Password\"\n                    boxClasses=\"mt-2\"\n                    type={passwordType}\n                    iconUrl={require(\"#/assets/icons/view-password.svg\")}\n                    onIconClick={this.handlePasswordType}\n                    error={errors ? errors.password : (errorObject && errorObject['password'])}\n                  />\n                  <PasswordStrengthBar password={password} className={`${showSignal ? 'd-block' : 'd-none'} mt-2`} />\n                  <Textbox\n                    onChange={this.handleChange}\n                    name=\"confirm\"\n                    value={confirm}\n                    label=\"Confirm password\"\n                    placeholder=\"Confirm Password\"\n                    boxClasses=\"mt-2\"\n                    type={conPasswordType}\n                    iconUrl={require(\"#/assets/icons/view-password.svg\")}\n                    onIconClick={this.handleConPasswordType}\n                    error={errors && errors.confirm}\n                  />\n                  <button type=\"submit\" className=\"w-100 btn btn-md btn-primary mt-3\" onClick={this.handleSubmit} disabled={loading}>\n                    Create Account\n                    {loading &&\n                      <div className=\"spinner-border spinner-border-white spinner-border-sm ml-2\"></div>\n                    }\n                  </button>\n                </form>\n                <div className=\"notice mt-4\">\n                  <p className=\"w-75 text-center\">\n                    Creating a CPCompass account means you agree to our\n                      <a style={{color:'red'}} href={`${CONFIG.WEBSITE_URL}/cookiesPolicy`} target=\"_blank\" rel=\"noopener noreferrer\">\n                        <span> </span>Privacy Policy\n                      </a> and \n                      <a href={`${CONFIG.WEBSITE_URL}/termsAndConditions`} target=\"_blank\" rel=\"noopener noreferrer\">\n                      <span> </span>Terms of Service\n                      </a>\n                  </p>\n                </div>\n                <hr />\n                <div className=\"sign-in mt-4\">\n                  <p>Have an account already? <Link to=\"/login\"><b>Sign in</b></Link></p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  const { auth: { register: { error, data } } } = state;\n  return {\n    loading: getActionLoadingState(state, actionTypes.REGISTER_REQUEST),\n    error,\n    data,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    registerUser: (payload, history) => dispatch(register(payload, history)),\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Signup));\n"]},"metadata":{},"sourceType":"module"}