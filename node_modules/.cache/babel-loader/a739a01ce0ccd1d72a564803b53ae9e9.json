{"ast":null,"code":"var _jsxFileName = \"/Users/adebayooluyemi/Documents/THE BULB/cpinvest-app/cpinvest-app/src/pages/App/Marketplace/PPI/index.js\";\nimport React from 'react';\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { getActionLoadingState } from \"#/store/selectors\";\nimport actionTypes from \"#/store/ppi/actionTypes\";\nimport { getActivePpi, getSinglePpi } from '#/store/ppi/actions';\nimport SingleMutualFund from '#/pages/App/Marketplace/SingleMutualFund';\nimport './style.scss';\nimport MarketSkeleton from '../Skeleton';\nimport PpiCard from '#/components/PpiCard';\n\nclass PPI extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      stageOne: true,\n      stageTwo: false,\n      selectFund: null,\n      limit: 10,\n      page: 1\n    };\n\n    this.handleSingleFund = fund => {\n      this.setState({\n        selectFund: fund\n      }, () => {\n        this.setState({\n          stageTwo: true,\n          stageOne: false\n        }, () => {\n          this.props.togglePpiMenu();\n        });\n        this.props.getSinglePpi(fund.slug);\n      });\n    };\n\n    this.navigateBack = () => {\n      this.setState({\n        stageTwo: false,\n        stageOne: true\n      }, () => {\n        this.props.togglePpiMenu();\n      });\n    };\n\n    this.fetchMore = () => {\n      this.setState({\n        page: this.state.page + 1\n      }, () => {\n        this.props.getActivePpi(this.state.page, this.state.limit);\n      });\n    };\n\n    this.fetchPrevious = () => {\n      if (this.state.page === 1) {\n        return;\n      }\n\n      this.setState({\n        page: this.state.page - 1\n      }, () => {\n        this.props.getActivePpi(this.state.page, this.state.limit);\n      });\n    };\n  }\n\n  componentDidMount() {\n    const {\n      page,\n      limit\n    } = this.state;\n    this.props.getActivePpi(page, limit);\n  }\n\n  render() {\n    const {\n      loading,\n      funds,\n      fund,\n      fundLoading,\n      data\n    } = this.props;\n    const {\n      stageOne,\n      stageTwo\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"ppi-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 7\n      }\n    }, stageOne && /*#__PURE__*/React.createElement(React.Fragment, null, !funds && loading && /*#__PURE__*/React.createElement(MarketSkeleton, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 35\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 13\n      }\n    }, funds && funds.length > 0 ? funds.map(fund => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4 cursor-pointer\",\n      key: fund.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(PpiCard, {\n      item: fund,\n      handleSelect: () => this.handleSingleFund(fund),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 21\n      }\n    }))) : !loading && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center w-100 mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"text-grey text-medium\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 21\n      }\n    }, \"There are no new issues at this time\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center d-flex justify-content-between align-items-center mt-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary btn-sm mr-2\",\n      onClick: this.fetchPrevious,\n      disabled: loading || this.state.page === 1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 15\n      }\n    }, \"Prev\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary btn-sm ml-2\",\n      onClick: this.fetchMore,\n      disabled: loading || this.state.page === (data === null || data === void 0 ? void 0 : data.lastPage),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 15\n      }\n    }, \"Next\")), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"text-grey text-small\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }\n    }, \"Page \", this.state.page))), stageTwo && /*#__PURE__*/React.createElement(React.Fragment, null, fundLoading && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-center mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"spinner-border text-primary spinner-border-md text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"p\", {\n      onClick: this.navigateBack,\n      className: \"cursor-pointer text-blue\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: require(\"#/assets/icons/back-arrow.svg\"),\n      alt: \"arrow\",\n      className: \"mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }\n    }), \" Back\"), fund && /*#__PURE__*/React.createElement(SingleMutualFund, {\n      fund: fund,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 22\n      }\n    })));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  const {\n    app: {\n      ppi: {\n        funds,\n        data,\n        fund\n      }\n    }\n  } = state;\n  return {\n    loading: getActionLoadingState(state, actionTypes.GET_ACTIVE_PPI_REQUEST),\n    fundLoading: getActionLoadingState(state, actionTypes.GET_SINGLE_PPI_REQUEST),\n    funds,\n    data,\n    fund\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    getActivePpi: (page, limit) => dispatch(getActivePpi(page, limit)),\n    getSinglePpi: slug => dispatch(getSinglePpi(slug))\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(PPI));","map":{"version":3,"sources":["/Users/adebayooluyemi/Documents/THE BULB/cpinvest-app/cpinvest-app/src/pages/App/Marketplace/PPI/index.js"],"names":["React","withRouter","connect","getActionLoadingState","actionTypes","getActivePpi","getSinglePpi","SingleMutualFund","MarketSkeleton","PpiCard","PPI","Component","state","stageOne","stageTwo","selectFund","limit","page","handleSingleFund","fund","setState","props","togglePpiMenu","slug","navigateBack","fetchMore","fetchPrevious","componentDidMount","render","loading","funds","fundLoading","data","length","map","id","lastPage","require","mapStateToProps","app","ppi","GET_ACTIVE_PPI_REQUEST","GET_SINGLE_PPI_REQUEST","mapDispatchToProps","dispatch"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,qBAAT,QAAsC,mBAAtC;AACA,OAAOC,WAAP,MAAwB,yBAAxB;AACA,SAASC,YAAT,EAAuBC,YAAvB,QAA2C,qBAA3C;AACA,OAAOC,gBAAP,MAA6B,0CAA7B;AACA,OAAO,cAAP;AACA,OAAOC,cAAP,MAA2B,aAA3B;AACA,OAAOC,OAAP,MAAoB,sBAApB;;AAEA,MAAMC,GAAN,SAAkBV,KAAK,CAACW,SAAxB,CAAkC;AAAA;AAAA;AAAA,SAEhCC,KAFgC,GAExB;AACNC,MAAAA,QAAQ,EAAE,IADJ;AAENC,MAAAA,QAAQ,EAAE,KAFJ;AAGNC,MAAAA,UAAU,EAAE,IAHN;AAINC,MAAAA,KAAK,EAAE,EAJD;AAKNC,MAAAA,IAAI,EAAE;AALA,KAFwB;;AAAA,SAehCC,gBAfgC,GAeZC,IAAD,IAAU;AAC3B,WAAKC,QAAL,CAAc;AAAEL,QAAAA,UAAU,EAAEI;AAAd,OAAd,EAAoC,MAAK;AACvC,aAAKC,QAAL,CAAc;AAAEN,UAAAA,QAAQ,EAAE,IAAZ;AAAkBD,UAAAA,QAAQ,EAAE;AAA5B,SAAd,EAAmD,MAAM;AACvD,eAAKQ,KAAL,CAAWC,aAAX;AACD,SAFD;AAGA,aAAKD,KAAL,CAAWf,YAAX,CAAwBa,IAAI,CAACI,IAA7B;AACD,OALD;AAMD,KAtB+B;;AAAA,SAwBhCC,YAxBgC,GAwBjB,MAAM;AACnB,WAAKJ,QAAL,CAAc;AAAEN,QAAAA,QAAQ,EAAE,KAAZ;AAAmBD,QAAAA,QAAQ,EAAE;AAA7B,OAAd,EAAmD,MAAM;AACvD,aAAKQ,KAAL,CAAWC,aAAX;AACD,OAFD;AAGD,KA5B+B;;AAAA,SA8BhCG,SA9BgC,GA8BpB,MAAM;AAChB,WAAKL,QAAL,CAAc;AAAEH,QAAAA,IAAI,EAAE,KAAKL,KAAL,CAAWK,IAAX,GAAkB;AAA1B,OAAd,EAA6C,MAAM;AACjD,aAAKI,KAAL,CAAWhB,YAAX,CAAwB,KAAKO,KAAL,CAAWK,IAAnC,EAAyC,KAAKL,KAAL,CAAWI,KAApD;AACD,OAFD;AAGD,KAlC+B;;AAAA,SAoChCU,aApCgC,GAoChB,MAAM;AACpB,UAAI,KAAKd,KAAL,CAAWK,IAAX,KAAoB,CAAxB,EAA2B;AACzB;AACD;;AACD,WAAKG,QAAL,CAAc;AAAEH,QAAAA,IAAI,EAAE,KAAKL,KAAL,CAAWK,IAAX,GAAkB;AAA1B,OAAd,EAA6C,MAAM;AACjD,aAAKI,KAAL,CAAWhB,YAAX,CAAwB,KAAKO,KAAL,CAAWK,IAAnC,EAAyC,KAAKL,KAAL,CAAWI,KAApD;AACD,OAFD;AAGD,KA3C+B;AAAA;;AAUhCW,EAAAA,iBAAiB,GAAG;AAClB,UAAM;AAAEV,MAAAA,IAAF;AAAQD,MAAAA;AAAR,QAAkB,KAAKJ,KAA7B;AACA,SAAKS,KAAL,CAAWhB,YAAX,CAAwBY,IAAxB,EAA8BD,KAA9B;AACD;;AAgCDY,EAAAA,MAAM,GAAG;AACP,UAAM;AAAEC,MAAAA,OAAF;AAAWC,MAAAA,KAAX;AAAkBX,MAAAA,IAAlB;AAAwBY,MAAAA,WAAxB;AAAqCC,MAAAA;AAArC,QAA8C,KAAKX,KAAzD;AACA,UAAM;AAAER,MAAAA,QAAF;AAAYC,MAAAA;AAAZ,QAAyB,KAAKF,KAApC;AACA,wBACE;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEIC,QAAQ,iBACR,0CACG,CAACiB,KAAD,IAAUD,OAAV,iBAAqB,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADxB,eAEE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGC,KAAK,IACJA,KAAK,CAACG,MAAN,GAAe,CADhB,GAECH,KAAK,CAACI,GAAN,CAAUf,IAAI,iBACZ;AAAK,MAAA,SAAS,EAAC,yBAAf;AAAyC,MAAA,GAAG,EAAEA,IAAI,CAACgB,EAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,OAAD;AACE,MAAA,IAAI,EAAEhB,IADR;AAEE,MAAA,YAAY,EAAE,MAAM,KAAKD,gBAAL,CAAsBC,IAAtB,CAFtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,CAFD,GAWE,CAACU,OAAD,iBACC;AAAK,MAAA,SAAS,EAAC,wBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAG,MAAA,SAAS,EAAC,uBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8CADF,CAbN,CAFF,eAqBE;AAAK,MAAA,SAAS,EAAC,oEAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAQ,MAAA,SAAS,EAAC,6BAAlB;AAAgD,MAAA,OAAO,EAAE,KAAKH,aAA9D;AAA6E,MAAA,QAAQ,EAAEG,OAAO,IAAI,KAAKjB,KAAL,CAAWK,IAAX,KAAoB,CAAtH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAIE;AAAQ,MAAA,SAAS,EAAC,6BAAlB;AAAgD,MAAA,OAAO,EAAE,KAAKQ,SAA9D;AAAyE,MAAA,QAAQ,EAAEI,OAAO,IAAI,KAAKjB,KAAL,CAAWK,IAAX,MAAoBe,IAApB,aAAoBA,IAApB,uBAAoBA,IAAI,CAAEI,QAA1B,CAA9F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAJF,CADA,eASA;AAAG,MAAA,SAAS,EAAC,sBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAA0C,KAAKxB,KAAL,CAAWK,IAArD,CATA,CArBF,CAHJ,EAuCIH,QAAQ,iBACR,0CACGiB,WAAW,iBACV;AAAK,MAAA,SAAS,EAAC,oCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,2DAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAFJ,eAOE;AAAG,MAAA,OAAO,EAAE,KAAKP,YAAjB;AAA+B,MAAA,SAAS,EAAC,0BAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA;AAAK,MAAA,GAAG,EAAEa,OAAO,CAAC,+BAAD,CAAjB;AAAoD,MAAA,GAAG,EAAC,OAAxD;AAAgE,MAAA,SAAS,EAAC,MAA1E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,UAPF,EAUGlB,IAAI,iBAAI,oBAAC,gBAAD;AAAkB,MAAA,IAAI,EAAEA,IAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAVX,CAxCJ,CADF;AAyDD;;AAzG+B;;AA4GlC,MAAMmB,eAAe,GAAG1B,KAAK,IAAI;AAC/B,QAAM;AAAE2B,IAAAA,GAAG,EAAE;AAAEC,MAAAA,GAAG,EAAE;AAAEV,QAAAA,KAAF;AAASE,QAAAA,IAAT;AAAeb,QAAAA;AAAf;AAAP;AAAP,MAA0CP,KAAhD;AAEA,SAAO;AACLiB,IAAAA,OAAO,EAAE1B,qBAAqB,CAACS,KAAD,EAAQR,WAAW,CAACqC,sBAApB,CADzB;AAELV,IAAAA,WAAW,EAAE5B,qBAAqB,CAACS,KAAD,EAAQR,WAAW,CAACsC,sBAApB,CAF7B;AAGLZ,IAAAA,KAHK;AAILE,IAAAA,IAJK;AAKLb,IAAAA;AALK,GAAP;AAOD,CAVD;;AAYA,MAAMwB,kBAAkB,GAAIC,QAAD,IAAc;AACvC,SAAO;AACLvC,IAAAA,YAAY,EAAE,CAACY,IAAD,EAAOD,KAAP,KAAiB4B,QAAQ,CAACvC,YAAY,CAACY,IAAD,EAAOD,KAAP,CAAb,CADlC;AAELV,IAAAA,YAAY,EAAGiB,IAAD,IAAUqB,QAAQ,CAACtC,YAAY,CAACiB,IAAD,CAAb;AAF3B,GAAP;AAID,CALD;;AAOA,eAAetB,UAAU,CAACC,OAAO,CAACoC,eAAD,EAAkBK,kBAAlB,CAAP,CAA6CjC,GAA7C,CAAD,CAAzB","sourcesContent":["import React from 'react';\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { getActionLoadingState } from \"#/store/selectors\";\nimport actionTypes from \"#/store/ppi/actionTypes\";\nimport { getActivePpi, getSinglePpi } from '#/store/ppi/actions';\nimport SingleMutualFund from '#/pages/App/Marketplace/SingleMutualFund';\nimport './style.scss';\nimport MarketSkeleton from '../Skeleton';\nimport PpiCard from '#/components/PpiCard';\n\nclass PPI extends React.Component {\n\n  state = {\n    stageOne: true,\n    stageTwo: false,\n    selectFund: null,\n    limit: 10,\n    page: 1,\n  }\n\n  componentDidMount() {\n    const { page, limit } = this.state;\n    this.props.getActivePpi(page, limit);\n  }\n\n  handleSingleFund = (fund) => {\n    this.setState({ selectFund: fund }, ()=> {\n      this.setState({ stageTwo: true, stageOne: false }, () => {\n        this.props.togglePpiMenu()\n      });\n      this.props.getSinglePpi(fund.slug);\n    })\n  }\n\n  navigateBack = () => {\n    this.setState({ stageTwo: false, stageOne: true }, () => {\n      this.props.togglePpiMenu()\n    });\n  }\n\n  fetchMore = () => {\n    this.setState({ page: this.state.page + 1 }, () => {\n      this.props.getActivePpi(this.state.page, this.state.limit)\n    })\n  }\n\n  fetchPrevious = () => {\n    if (this.state.page === 1) {\n      return;\n    }\n    this.setState({ page: this.state.page - 1 }, () => {\n      this.props.getActivePpi(this.state.page, this.state.limit)\n    })\n  }\n\n  render() {\n    const { loading, funds, fund, fundLoading, data } = this.props;\n    const { stageOne, stageTwo } = this.state;\n    return (\n      <div className=\"ppi-page\">\n        {\n          stageOne &&\n          <>\n            {!funds && loading && <MarketSkeleton />}\n            <div className=\"row\">\n              {funds &&\n                funds.length > 0 ?\n                funds.map(fund => (\n                  <div className=\"col-md-4 cursor-pointer\" key={fund.id}>\n                    <PpiCard \n                      item={fund}\n                      handleSelect={() => this.handleSingleFund(fund)}\n                    />\n                  </div>\n                ))\n                :\n                (!loading &&\n                  <div className=\"text-center w-100 mt-5\">\n                    <p className=\"text-grey text-medium\">There are no new issues at this time</p>\n                  </div>)\n              }\n            </div>\n\n            <div className=\"text-center d-flex justify-content-between align-items-center mt-3\">\n            <div>\n              <button className=\"btn btn-primary btn-sm mr-2\" onClick={this.fetchPrevious} disabled={loading || this.state.page === 1}>\n                Prev\n              </button>\n              <button className=\"btn btn-primary btn-sm ml-2\" onClick={this.fetchMore} disabled={loading || this.state.page === data?.lastPage}>\n                Next\n              </button>\n            </div>\n            <p className=\"text-grey text-small\">Page {this.state.page}</p>\n          </div>\n          </>\n        }\n\n        {\n          stageTwo &&\n          <>\n            {fundLoading &&\n              <div className=\"d-flex justify-content-center mt-5\">\n                <div className=\"spinner-border text-primary spinner-border-md text-center\"></div>\n              </div>\n            }\n            \n            <p onClick={this.navigateBack} className=\"cursor-pointer text-blue\"> \n            <img src={require(\"#/assets/icons/back-arrow.svg\")} alt=\"arrow\" className=\"mr-2\"/> Back\n            </p>\n            {fund && <SingleMutualFund fund={fund} />}\n          </>\n        }\n\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  const { app: { ppi: { funds, data, fund } } } = state;\n\n  return {\n    loading: getActionLoadingState(state, actionTypes.GET_ACTIVE_PPI_REQUEST),\n    fundLoading: getActionLoadingState(state, actionTypes.GET_SINGLE_PPI_REQUEST),\n    funds,\n    data,\n    fund,\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    getActivePpi: (page, limit) => dispatch(getActivePpi(page, limit)),\n    getSinglePpi: (slug) => dispatch(getSinglePpi(slug)),\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(PPI));\n"]},"metadata":{},"sourceType":"module"}