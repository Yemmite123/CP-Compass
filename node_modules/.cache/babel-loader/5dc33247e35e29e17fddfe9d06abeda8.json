{"ast":null,"code":"var _jsxFileName = \"/Users/adebayooluyemi/Documents/THE BULB/cpinvest-app/cpinvest-app/src/pages/App/TrendingInsights/index.js\";\nimport React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { getActionLoadingState } from \"#/store/selectors\";\nimport actionTypes from \"#/store/blog/actionTypes\";\nimport { getLatestPosts, getTrendingPosts, filterPosts } from '#/store/blog/actions';\nimport BlogItem from '#/components/BlogItem';\nimport moment from 'moment';\nimport DashboardBodyMenu from '#/components/DashboardBodyMenu';\nimport './style.scss';\nimport MainBlogItem from '#/components/MainBlogitem';\n\nclass TrendingInsights extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      page: 1,\n      limit: 10,\n      search: '',\n      searchPage: 1,\n      searchLimit: 10\n    };\n\n    this.handleNavigateToPost = insight => {\n      this.props.history.push({\n        pathname: `/app/insights/insight/${insight.slug}`,\n        state: {\n          routeName: insight.title\n        }\n      });\n    };\n\n    this.handleChange = event => {\n      const {\n        name,\n        value\n      } = event.target;\n      this.setState({\n        [name]: value\n      }, () => {\n        if (name === 'search') {\n          this.props.filterPosts(value, 1, 10);\n        }\n      });\n    };\n\n    this.handleLoadMore = () => {\n      this.setState({\n        page: 1,\n        limit: this.state.limit + 10\n      }, () => {\n        this.props.getTrendingPosts(this.state.limit, this.state.page);\n      });\n    };\n\n    this.loadMoreSearch = () => {\n      this.setState({\n        searchPage: 1,\n        limit: this.state.searchLimit + 10\n      }, () => {\n        this.props.filterPosts(this.state.search, this.state.searchPage, this.state.searchLimit);\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.props.getTrendingPosts(10, 1);\n    this.props.getLatestPosts(10, 1);\n  }\n\n  render() {\n    var _posts$category, _trending$data$, _trending$data$2, _trending$data$3, _trending$data$4, _trending$data$4$cate, _trending$data$5, _trending$data$5$cate, _filter$posts, _filter$posts2, _filter$posts3, _filter$posts4;\n\n    const {\n      trending,\n      loading,\n      filter,\n      searchloading,\n      posts\n    } = this.props;\n    const {\n      search\n    } = this.state;\n    const defaultMenu = [{\n      name: 'Home',\n      path: '/app/insights',\n      title: 'Insights'\n    }, {\n      name: 'Trending Topics',\n      path: '/app/insights/trending',\n      title: 'Trending'\n    }];\n    const menus = posts === null || posts === void 0 ? void 0 : (_posts$category = posts.category) === null || _posts$category === void 0 ? void 0 : _posts$category.map(item => ({\n      name: item.name,\n      path: `/app/insights/category/${item.slug}`,\n      title: item.name\n    }));\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"insights-category-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-between\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }\n    }, (posts === null || posts === void 0 ? void 0 : posts.category) && /*#__PURE__*/React.createElement(DashboardBodyMenu, {\n      menus: [...defaultMenu, ...menus],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 31\n      }\n    })), loading && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center mt-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"spinner-border text-blue spinner-border-md ml-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }\n    })), (trending === null || trending === void 0 ? void 0 : trending.data.length) > 0 && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mt-3 no-gutters\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"main-blog-img-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: trending === null || trending === void 0 ? void 0 : (_trending$data$ = trending.data[0]) === null || _trending$data$ === void 0 ? void 0 : _trending$data$.image,\n      alt: \"feature\",\n      className: \"img-fluid main-blog-img\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-7\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"blog-info-main p-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"cursor-pointer font-weight-normal\",\n      onClick: () => this.handleNavigateToPost(trending === null || trending === void 0 ? void 0 : trending.data[0]),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }\n    }, trending === null || trending === void 0 ? void 0 : trending.data[0].title), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex align-items-center my-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: trending === null || trending === void 0 ? void 0 : (_trending$data$2 = trending.data[0]) === null || _trending$data$2 === void 0 ? void 0 : _trending$data$2.user.pictureUrl,\n      alt: \"feature\",\n      className: \"img-fluid profile-photo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"text-grey text-small mb-0 ml-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 19\n      }\n    }, trending === null || trending === void 0 ? void 0 : trending.data[0].user.firstName, \" \", trending === null || trending === void 0 ? void 0 : trending.data[0].user.lastName, \" on \", moment(trending === null || trending === void 0 ? void 0 : trending.data[0].created_at).format('MMMM Do YYYY'))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }\n    }, trending === null || trending === void 0 ? void 0 : (_trending$data$3 = trending.data[0]) === null || _trending$data$3 === void 0 ? void 0 : _trending$data$3.description, \"...\")), /*#__PURE__*/React.createElement(\"span\", {\n      className: `blog-category-${trending === null || trending === void 0 ? void 0 : (_trending$data$4 = trending.data[0]) === null || _trending$data$4 === void 0 ? void 0 : (_trending$data$4$cate = _trending$data$4.category) === null || _trending$data$4$cate === void 0 ? void 0 : _trending$data$4$cate.name} cursor-pointer`,\n      onClick: () => this.handleNavigateToCategory(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 15\n      }\n    }, trending === null || trending === void 0 ? void 0 : (_trending$data$5 = trending.data[0]) === null || _trending$data$5 === void 0 ? void 0 : (_trending$data$5$cate = _trending$data$5.category) === null || _trending$data$5$cate === void 0 ? void 0 : _trending$data$5$cate.name)))), (trending === null || trending === void 0 ? void 0 : trending.data.length) > 0 && /*#__PURE__*/React.createElement(\"h2\", {\n      className: `text-left text-black pt-5 mt-3`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }\n    }, \"All Trending articles\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }\n    }, (trending === null || trending === void 0 ? void 0 : trending.data) && ((trending === null || trending === void 0 ? void 0 : trending.data.length) > 0 ? trending === null || trending === void 0 ? void 0 : trending.data.map(blogpost => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 mt-4\",\n      key: blogpost.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(MainBlogItem, {\n      item: blogpost,\n      navigateToItem: this.handleNavigateToPost,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 19\n      }\n    }))) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 15\n      }\n    }, \"No trending topics\"))), (trending === null || trending === void 0 ? void 0 : trending.data) && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center mt-4 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 11\n      }\n    }, (trending === null || trending === void 0 ? void 0 : trending.data.length) !== (trending === null || trending === void 0 ? void 0 : trending.total) && /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-stroke-black btn-sm text-center\",\n      onClick: this.handleLoadMore,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 15\n      }\n    }, \"Load more\", loading && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"spinner-border text-black spinner-border-sm ml-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 19\n      }\n    }))), search !== '' && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"text-center text-blue text-medium mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 13\n      }\n    }, \"Search Results\"), searchloading && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"spinner-border text-blue spinner-border-md ml-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 13\n      }\n    }, filter && ((filter === null || filter === void 0 ? void 0 : (_filter$posts = filter.posts) === null || _filter$posts === void 0 ? void 0 : _filter$posts.data.length) > 0 ? filter === null || filter === void 0 ? void 0 : (_filter$posts2 = filter.posts) === null || _filter$posts2 === void 0 ? void 0 : _filter$posts2.data.map(blogpost => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4\",\n      key: blogpost.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(BlogItem, {\n      item: blogpost,\n      navigateToItem: this.handleNavigateToPost,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 23\n      }\n    }))) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center w-100 mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"text-grey mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 21\n      }\n    }, \"No results for \", search)))), (filter === null || filter === void 0 ? void 0 : (_filter$posts3 = filter.posts) === null || _filter$posts3 === void 0 ? void 0 : _filter$posts3.total) > (filter === null || filter === void 0 ? void 0 : (_filter$posts4 = filter.posts) === null || _filter$posts4 === void 0 ? void 0 : _filter$posts4.data.length) && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-stroke-black btn-sm text-center\",\n      onClick: this.loadMoreSearch,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 17\n      }\n    }, \"Load more\"))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  const {\n    app: {\n      blog: {\n        trending,\n        filter,\n        posts\n      }\n    }\n  } = state;\n  return {\n    loading: getActionLoadingState(state, actionTypes.GET_TRENDING_POSTS_REQUEST),\n    searchloading: getActionLoadingState(state, actionTypes.FILTER_POSTS_REQUEST),\n    trending,\n    filter,\n    posts\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    getLatestPosts: (limit, page) => dispatch(getLatestPosts(limit, page)),\n    getTrendingPosts: (limit, page) => dispatch(getTrendingPosts(limit, page)),\n    filterPosts: (search, limit, page) => dispatch(filterPosts(search, limit, page))\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(TrendingInsights));","map":{"version":3,"sources":["/Users/adebayooluyemi/Documents/THE BULB/cpinvest-app/cpinvest-app/src/pages/App/TrendingInsights/index.js"],"names":["React","withRouter","connect","getActionLoadingState","actionTypes","getLatestPosts","getTrendingPosts","filterPosts","BlogItem","moment","DashboardBodyMenu","MainBlogItem","TrendingInsights","Component","state","page","limit","search","searchPage","searchLimit","handleNavigateToPost","insight","props","history","push","pathname","slug","routeName","title","handleChange","event","name","value","target","setState","handleLoadMore","loadMoreSearch","componentDidMount","render","trending","loading","filter","searchloading","posts","defaultMenu","path","menus","category","map","item","data","length","image","user","pictureUrl","firstName","lastName","created_at","format","description","handleNavigateToCategory","blogpost","id","total","mapStateToProps","app","blog","GET_TRENDING_POSTS_REQUEST","FILTER_POSTS_REQUEST","mapDispatchToProps","dispatch"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,qBAAT,QAAsC,mBAAtC;AACA,OAAOC,WAAP,MAAwB,0BAAxB;AACA,SAASC,cAAT,EAAyBC,gBAAzB,EAA2CC,WAA3C,QAA8D,sBAA9D;AACA,OAAOC,QAAP,MAAqB,uBAArB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,iBAAP,MAA8B,gCAA9B;AACA,OAAO,cAAP;AACA,OAAOC,YAAP,MAAyB,2BAAzB;;AAEA,MAAMC,gBAAN,SAA+BZ,KAAK,CAACa,SAArC,CAA+C;AAAA;AAAA;AAAA,SAE7CC,KAF6C,GAErC;AACNC,MAAAA,IAAI,EAAE,CADA;AAENC,MAAAA,KAAK,EAAE,EAFD;AAGNC,MAAAA,MAAM,EAAE,EAHF;AAINC,MAAAA,UAAU,EAAE,CAJN;AAKNC,MAAAA,WAAW,EAAE;AALP,KAFqC;;AAAA,SAe7CC,oBAf6C,GAerBC,OAAD,IAAa;AAClC,WAAKC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB;AACtBC,QAAAA,QAAQ,EAAG,yBAAwBJ,OAAO,CAACK,IAAK,EAD1B;AAEtBZ,QAAAA,KAAK,EAAE;AAAEa,UAAAA,SAAS,EAAEN,OAAO,CAACO;AAArB;AAFe,OAAxB;AAID,KApB4C;;AAAA,SAsB7CC,YAtB6C,GAsB7BC,KAAD,IAAW;AACxB,YAAM;AAAEC,QAAAA,IAAF;AAAQC,QAAAA;AAAR,UAAkBF,KAAK,CAACG,MAA9B;AACA,WAAKC,QAAL,CAAc;AAAE,SAACH,IAAD,GAAQC;AAAV,OAAd,EAAiC,MAAM;AACrC,YAAID,IAAI,KAAK,QAAb,EAAuB;AACrB,eAAKT,KAAL,CAAWf,WAAX,CAAuByB,KAAvB,EAA8B,CAA9B,EAAiC,EAAjC;AACD;AACF,OAJD;AAKD,KA7B4C;;AAAA,SA+B7CG,cA/B6C,GA+B5B,MAAM;AACrB,WAAKD,QAAL,CAAc;AAAEnB,QAAAA,IAAI,EAAE,CAAR;AAAWC,QAAAA,KAAK,EAAE,KAAKF,KAAL,CAAWE,KAAX,GAAmB;AAArC,OAAd,EAAyD,MAAM;AAC7D,aAAKM,KAAL,CAAWhB,gBAAX,CAA4B,KAAKQ,KAAL,CAAWE,KAAvC,EAA8C,KAAKF,KAAL,CAAWC,IAAzD;AACD,OAFD;AAGD,KAnC4C;;AAAA,SAqC7CqB,cArC6C,GAqC5B,MAAM;AACrB,WAAKF,QAAL,CAAc;AAAEhB,QAAAA,UAAU,EAAE,CAAd;AAAiBF,QAAAA,KAAK,EAAE,KAAKF,KAAL,CAAWK,WAAX,GAAyB;AAAjD,OAAd,EAAqE,MAAM;AACzE,aAAKG,KAAL,CAAWf,WAAX,CAAuB,KAAKO,KAAL,CAAWG,MAAlC,EAA0C,KAAKH,KAAL,CAAWI,UAArD,EAAiE,KAAKJ,KAAL,CAAWK,WAA5E;AACD,OAFD;AAGD,KAzC4C;AAAA;;AAU7CkB,EAAAA,iBAAiB,GAAG;AAClB,SAAKf,KAAL,CAAWhB,gBAAX,CAA4B,EAA5B,EAAgC,CAAhC;AACA,SAAKgB,KAAL,CAAWjB,cAAX,CAA0B,EAA1B,EAA8B,CAA9B;AACD;;AA8BDiC,EAAAA,MAAM,GAAG;AAAA;;AACP,UAAM;AAAEC,MAAAA,QAAF;AAAYC,MAAAA,OAAZ;AAAqBC,MAAAA,MAArB;AAA6BC,MAAAA,aAA7B;AAA4CC,MAAAA;AAA5C,QAAsD,KAAKrB,KAAjE;AACA,UAAM;AAAEL,MAAAA;AAAF,QAAa,KAAKH,KAAxB;AAEA,UAAM8B,WAAW,GAAG,CAClB;AACEb,MAAAA,IAAI,EAAE,MADR;AAEEc,MAAAA,IAAI,EAAE,eAFR;AAGEjB,MAAAA,KAAK,EAAE;AAHT,KADkB,EAMlB;AACEG,MAAAA,IAAI,EAAE,iBADR;AAEEc,MAAAA,IAAI,EAAE,wBAFR;AAGEjB,MAAAA,KAAK,EAAE;AAHT,KANkB,CAApB;AAYA,UAAMkB,KAAK,GAAGH,KAAH,aAAGA,KAAH,0CAAGA,KAAK,CAAEI,QAAV,oDAAG,gBAAiBC,GAAjB,CAAqBC,IAAI,KAAK;AAC1ClB,MAAAA,IAAI,EAAEkB,IAAI,CAAClB,IAD+B;AAE1Cc,MAAAA,IAAI,EAAG,0BAAyBI,IAAI,CAACvB,IAAK,EAFA;AAG1CE,MAAAA,KAAK,EAAEqB,IAAI,CAAClB;AAH8B,KAAL,CAAzB,CAAd;AAMA,wBACE;AAAK,MAAA,SAAS,EAAC,wBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,gCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,CAAAY,KAAK,SAAL,IAAAA,KAAK,WAAL,YAAAA,KAAK,CAAEI,QAAP,kBAAmB,oBAAC,iBAAD;AAAmB,MAAA,KAAK,EAAE,CAAC,GAAGH,WAAJ,EAAiB,GAAGE,KAApB,CAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADtB,CADF,EAKGN,OAAO,iBACN;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,iDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CANJ,EAWG,CAAAD,QAAQ,SAAR,IAAAA,QAAQ,WAAR,YAAAA,QAAQ,CAAEW,IAAV,CAAeC,MAAf,IAAwB,CAAxB,iBACC;AAAK,MAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,yBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,GAAG,EAAEZ,QAAF,aAAEA,QAAF,0CAAEA,QAAQ,CAAEW,IAAV,CAAe,CAAf,CAAF,oDAAE,gBAAmBE,KAA7B;AAAoC,MAAA,GAAG,EAAC,SAAxC;AAAkD,MAAA,SAAS,EAAC,yBAA5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,CADA,eAME;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA;AAAK,MAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAI,MAAA,SAAS,EAAC,mCAAd;AAAkD,MAAA,OAAO,EAAE,MAAM,KAAKhC,oBAAL,CAA0BmB,QAA1B,aAA0BA,QAA1B,uBAA0BA,QAAQ,CAAEW,IAAV,CAAe,CAAf,CAA1B,CAAjE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAgHX,QAAhH,aAAgHA,QAAhH,uBAAgHA,QAAQ,CAAEW,IAAV,CAAe,CAAf,EAAkBtB,KAAlI,CADF,eAEE;AAAK,MAAA,SAAS,EAAC,gCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,GAAG,EAAEW,QAAF,aAAEA,QAAF,2CAAEA,QAAQ,CAAEW,IAAV,CAAe,CAAf,CAAF,qDAAE,iBAAmBG,IAAnB,CAAwBC,UAAlC;AAA8C,MAAA,GAAG,EAAC,SAAlD;AAA4D,MAAA,SAAS,EAAC,yBAAtE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAEE;AAAG,MAAA,SAAS,EAAC,gCAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA+Cf,QAA/C,aAA+CA,QAA/C,uBAA+CA,QAAQ,CAAEW,IAAV,CAAe,CAAf,EAAkBG,IAAlB,CAAuBE,SAAtE,OAAkFhB,QAAlF,aAAkFA,QAAlF,uBAAkFA,QAAQ,CAAEW,IAAV,CAAe,CAAf,EAAkBG,IAAlB,CAAuBG,QAAzG,UAAuH/C,MAAM,CAAC8B,QAAD,aAACA,QAAD,uBAACA,QAAQ,CAAEW,IAAV,CAAe,CAAf,EAAkBO,UAAnB,CAAN,CAAqCC,MAArC,CAA4C,cAA5C,CAAvH,CAFF,CAFF,eAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAMnB,QAAN,aAAMA,QAAN,2CAAMA,QAAQ,CAAEW,IAAV,CAAe,CAAf,CAAN,qDAAM,iBAAmBS,WAAzB,QANF,CADF,eASE;AAAM,MAAA,SAAS,EAAG,iBAAgBpB,QAAjB,aAAiBA,QAAjB,2CAAiBA,QAAQ,CAAEW,IAAV,CAAe,CAAf,CAAjB,8EAAiB,iBAAmBH,QAApC,0DAAiB,sBAA6BhB,IAAK,iBAApE;AAAsF,MAAA,OAAO,EAAE,MAAM,KAAK6B,wBAAL,EAArG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGrB,QADH,aACGA,QADH,2CACGA,QAAQ,CAAEW,IAAV,CAAe,CAAf,CADH,8EACG,iBAAmBH,QADtB,0DACG,sBAA6BhB,IADhC,CATF,CADA,CANF,CAZJ,EAoCG,CAAAQ,QAAQ,SAAR,IAAAA,QAAQ,WAAR,YAAAA,QAAQ,CAAEW,IAAV,CAAeC,MAAf,IAAwB,CAAxB,iBACC;AAAI,MAAA,SAAS,EAAG,gCAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BArCJ,eAwCE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,CAAAZ,QAAQ,SAAR,IAAAA,QAAQ,WAAR,YAAAA,QAAQ,CAAEW,IAAV,MACE,CAAAX,QAAQ,SAAR,IAAAA,QAAQ,WAAR,YAAAA,QAAQ,CAAEW,IAAV,CAAeC,MAAf,IAAwB,CAAxB,GACCZ,QADD,aACCA,QADD,uBACCA,QAAQ,CAAEW,IAAV,CAAeF,GAAf,CAAmBa,QAAQ,iBACzB;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAgC,MAAA,GAAG,EAAEA,QAAQ,CAACC,EAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,YAAD;AAAc,MAAA,IAAI,EAAED,QAApB;AAA8B,MAAA,cAAc,EAAE,KAAKzC,oBAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,CADD,gBAOC;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BARH,CADH,CAxCF,EAsDG,CAAAmB,QAAQ,SAAR,IAAAA,QAAQ,WAAR,YAAAA,QAAQ,CAAEW,IAAV,kBACC;AAAK,MAAA,SAAS,EAAC,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,CAAAX,QAAQ,SAAR,IAAAA,QAAQ,WAAR,YAAAA,QAAQ,CAAEW,IAAV,CAAeC,MAAf,OAA0BZ,QAA1B,aAA0BA,QAA1B,uBAA0BA,QAAQ,CAAEwB,KAApC,kBACC;AAAQ,MAAA,SAAS,EAAC,yCAAlB;AAA4D,MAAA,OAAO,EAAE,KAAK5B,cAA1E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAECK,OAAO,iBACJ;AAAK,MAAA,SAAS,EAAC,kDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHJ,CAFJ,CAvDJ,EAmEGvB,MAAM,KAAK,EAAX,iBACC,uDACE;AAAI,MAAA,SAAS,EAAC,wCAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,EAEGyB,aAAa,iBACZ;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,iDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAHJ,eAOE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGD,MAAM,KACJ,CAAAA,MAAM,SAAN,IAAAA,MAAM,WAAN,6BAAAA,MAAM,CAAEE,KAAR,gEAAeO,IAAf,CAAoBC,MAApB,IAA6B,CAA7B,GACCV,MADD,aACCA,MADD,yCACCA,MAAM,CAAEE,KADT,mDACC,eAAeO,IAAf,CAAoBF,GAApB,CAAwBa,QAAQ,iBAC9B;AAAK,MAAA,SAAS,EAAC,UAAf;AAA0B,MAAA,GAAG,EAAEA,QAAQ,CAACC,EAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,QAAD;AAAU,MAAA,IAAI,EAAED,QAAhB;AAA0B,MAAA,cAAc,EAAE,KAAKzC,oBAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,CADD,gBAOC;AAAK,MAAA,SAAS,EAAC,wBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAG,MAAA,SAAS,EAAC,gBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAA8CH,MAA9C,CADF,CARG,CADT,CAPF,EAsBG,CAAAwB,MAAM,SAAN,IAAAA,MAAM,WAAN,8BAAAA,MAAM,CAAEE,KAAR,kEAAeoB,KAAf,KAAuBtB,MAAvB,aAAuBA,MAAvB,yCAAuBA,MAAM,CAAEE,KAA/B,mDAAuB,eAAeO,IAAf,CAAoBC,MAA3C,kBACC;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAQ,MAAA,SAAS,EAAC,yCAAlB;AAA4D,MAAA,OAAO,EAAE,KAAKf,cAA1E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,CAvBJ,CApEJ,CADF;AAsGD;;AAvK4C;;AA0K/C,MAAM4B,eAAe,GAAIlD,KAAD,IAAW;AACjC,QAAM;AAAEmD,IAAAA,GAAG,EAAE;AACXC,MAAAA,IAAI,EAAE;AAAE3B,QAAAA,QAAF;AAAYE,QAAAA,MAAZ;AAAoBE,QAAAA;AAApB;AADK;AAAP,MAEA7B,KAFN;AAIA,SAAO;AACL0B,IAAAA,OAAO,EAAErC,qBAAqB,CAACW,KAAD,EAAQV,WAAW,CAAC+D,0BAApB,CADzB;AAELzB,IAAAA,aAAa,EAAEvC,qBAAqB,CAACW,KAAD,EAAQV,WAAW,CAACgE,oBAApB,CAF/B;AAGL7B,IAAAA,QAHK;AAILE,IAAAA,MAJK;AAKLE,IAAAA;AALK,GAAP;AAOD,CAZD;;AAcA,MAAM0B,kBAAkB,GAAIC,QAAD,IAAc;AACvC,SAAO;AACLjE,IAAAA,cAAc,EAAE,CAACW,KAAD,EAAQD,IAAR,KAAiBuD,QAAQ,CAACjE,cAAc,CAACW,KAAD,EAAQD,IAAR,CAAf,CADpC;AAELT,IAAAA,gBAAgB,EAAE,CAACU,KAAD,EAAQD,IAAR,KAAiBuD,QAAQ,CAAChE,gBAAgB,CAACU,KAAD,EAAQD,IAAR,CAAjB,CAFtC;AAGLR,IAAAA,WAAW,EAAE,CAACU,MAAD,EAASD,KAAT,EAAgBD,IAAhB,KAAyBuD,QAAQ,CAAC/D,WAAW,CAACU,MAAD,EAASD,KAAT,EAAgBD,IAAhB,CAAZ;AAHzC,GAAP;AAKD,CAND;;AAQA,eAAed,UAAU,CAACC,OAAO,CAAC8D,eAAD,EAAkBK,kBAAlB,CAAP,CAA6CzD,gBAA7C,CAAD,CAAzB","sourcesContent":["import React from 'react';\nimport { withRouter } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport { getActionLoadingState } from \"#/store/selectors\";\nimport actionTypes from \"#/store/blog/actionTypes\";\nimport { getLatestPosts, getTrendingPosts, filterPosts } from '#/store/blog/actions'\nimport BlogItem from '#/components/BlogItem';\nimport moment from 'moment';\nimport DashboardBodyMenu from '#/components/DashboardBodyMenu';\nimport './style.scss';\nimport MainBlogItem from '#/components/MainBlogitem';\n\nclass TrendingInsights extends React.Component {\n\n  state = {\n    page: 1,\n    limit: 10,\n    search: '',\n    searchPage: 1,\n    searchLimit: 10,\n  }\n\n  componentDidMount() {\n    this.props.getTrendingPosts(10, 1);\n    this.props.getLatestPosts(10, 1);\n  }\n\n  handleNavigateToPost = (insight) => {\n    this.props.history.push({\n      pathname: `/app/insights/insight/${insight.slug}`,\n      state: { routeName: insight.title }\n    })\n  }\n\n  handleChange = (event) => {\n    const { name, value } = event.target\n    this.setState({ [name]: value }, () => {\n      if (name === 'search') {\n        this.props.filterPosts(value, 1, 10);\n      }\n    });\n  }\n\n  handleLoadMore = () => {\n    this.setState({ page: 1, limit: this.state.limit + 10 }, () => {\n      this.props.getTrendingPosts(this.state.limit, this.state.page);\n    })\n  }\n\n  loadMoreSearch = () => {\n    this.setState({ searchPage: 1, limit: this.state.searchLimit + 10 }, () => {\n      this.props.filterPosts(this.state.search, this.state.searchPage, this.state.searchLimit);\n    })\n  }\n\n  render() {\n    const { trending, loading, filter, searchloading, posts } = this.props;\n    const { search } = this.state;\n\n    const defaultMenu = [\n      {\n        name: 'Home',\n        path: '/app/insights',\n        title: 'Insights',\n      },\n      {\n        name: 'Trending Topics',\n        path: '/app/insights/trending',\n        title: 'Trending',\n      }\n    ]\n    const menus = posts?.category?.map(item => ({\n      name: item.name,\n      path: `/app/insights/category/${item.slug}`,\n      title: item.name,\n    }))\n\n    return (\n      <div className=\"insights-category-page\">\n        <div className=\"d-flex justify-content-between\">\n          {posts?.category && <DashboardBodyMenu menus={[...defaultMenu, ...menus]} />}\n        </div>\n\n        {loading &&\n          <div className=\"text-center mt-3\">\n            <div className=\"spinner-border text-blue spinner-border-md ml-2\"></div>\n          </div>\n        }\n\n        {trending?.data.length > 0 &&\n          <div className=\"row mt-3 no-gutters\">\n          <div className=\"col-md-5\">\n            <div className=\"main-blog-img-container\">\n              <img src={trending?.data[0]?.image} alt=\"feature\" className=\"img-fluid main-blog-img\" />\n            </div>\n            </div>\n            <div className=\"col-md-7\">\n            <div className=\"blog-info-main p-4\">\n              <div className=\"content mb-3\">\n                <h4 className=\"cursor-pointer font-weight-normal\" onClick={() => this.handleNavigateToPost(trending?.data[0])}>{trending?.data[0].title}</h4>\n                <div className=\"d-flex align-items-center my-3\">\n                  <img src={trending?.data[0]?.user.pictureUrl} alt=\"feature\" className=\"img-fluid profile-photo\" />\n                  <p className=\"text-grey text-small mb-0 ml-2\">{trending?.data[0].user.firstName} {trending?.data[0].user.lastName} on {moment(trending?.data[0].created_at).format('MMMM Do YYYY')}</p>\n                </div>\n                <div>{trending?.data[0]?.description}...</div>\n              </div>\n              <span className={`blog-category-${trending?.data[0]?.category?.name} cursor-pointer`} onClick={() => this.handleNavigateToCategory()}>\n                {trending?.data[0]?.category?.name}\n              </span>\n            </div>\n            </div>\n          </div>\n        }\n\n        {trending?.data.length > 0 &&\n          <h2 className={`text-left text-black pt-5 mt-3`}>All Trending articles</h2>\n        }\n\n        <div className=\"row\">\n          {trending?.data &&\n            (trending?.data.length > 0 ?\n              trending?.data.map(blogpost => (\n                <div className=\"col-md-12 mt-4\" key={blogpost.id}>\n                  <MainBlogItem item={blogpost} navigateToItem={this.handleNavigateToPost} />\n                </div>\n              ))\n              :\n              <div className=\"text-center\">\n                No trending topics\n            </div>)\n          }\n        </div>\n        {trending?.data &&\n          <div className=\"text-center mt-4 mb-4\">\n            {trending?.data.length !== trending?.total &&\n              <button className=\"btn btn-stroke-black btn-sm text-center\" onClick={this.handleLoadMore}>\n                Load more\n              {loading &&\n                  <div className=\"spinner-border text-black spinner-border-sm ml-2\"></div>\n                }\n              </button>\n            }\n          </div>\n        }\n\n        {search !== '' &&\n          <>\n            <h3 className=\"text-center text-blue text-medium mb-3\">Search Results</h3>\n            {searchloading &&\n              <div className=\"text-center\">\n                <div className=\"spinner-border text-blue spinner-border-md ml-2\"></div>\n              </div>\n            }\n            <div className=\"row\">\n              {filter &&\n                (filter?.posts?.data.length > 0 ?\n                  filter?.posts?.data.map(blogpost => (\n                    <div className=\"col-md-4\" key={blogpost.id}>\n                      <BlogItem item={blogpost} navigateToItem={this.handleNavigateToPost} />\n                    </div>\n                  ))\n                  :\n                  <div className=\"text-center w-100 mt-5\">\n                    <p className=\"text-grey mt-5\">No results for {search}</p>\n                  </div>\n                )\n              }\n            </div>\n            {filter?.posts?.total > filter?.posts?.data.length &&\n              <div className=\"text-center mt-4\">\n                <button className=\"btn btn-stroke-black btn-sm text-center\" onClick={this.loadMoreSearch}>\n                  Load more\n                </button>\n              </div>\n            }\n          </>\n        }\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  const { app: {\n    blog: { trending, filter, posts }\n  } } = state;\n\n  return {\n    loading: getActionLoadingState(state, actionTypes.GET_TRENDING_POSTS_REQUEST),\n    searchloading: getActionLoadingState(state, actionTypes.FILTER_POSTS_REQUEST),\n    trending,\n    filter,\n    posts\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    getLatestPosts: (limit, page) => dispatch(getLatestPosts(limit, page)),\n    getTrendingPosts: (limit, page) => dispatch(getTrendingPosts(limit, page)),\n    filterPosts: (search, limit, page) => dispatch(filterPosts(search, limit, page)),\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(TrendingInsights));"]},"metadata":{},"sourceType":"module"}