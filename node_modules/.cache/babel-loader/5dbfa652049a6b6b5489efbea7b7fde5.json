{"ast":null,"code":"var _jsxFileName = \"/Users/adebayooluyemi/Documents/THE BULB/cpinvest-app/cpinvest-app/src/components/Notifications/index.js\";\nimport React, { Component } from 'react';\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { getActionLoadingState } from \"#/store/selectors\";\nimport actionTypes from \"#/store/notifications/actionTypes\";\nimport { updateNotification, getAllNotifications } from '#/store/notifications/actions';\nimport Unread from \"#/assets/icons/unread.svg\";\nimport './style.scss';\n\nclass Notifications extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      showNotifications: false,\n      newNotif: false\n    };\n    this.dropdown = React.createRef();\n\n    this.updateNotification = (id, read) => {\n      if (read) return;\n      this.props.updateNotification(id, {\n        read: true\n      }).then(data => {\n        this.props.getAllNotifications(20, 1);\n      });\n    };\n\n    this.show = e => {\n      this.setState(state => ({\n        showNotifications: !state.showNotifications\n      }));\n      this.props.hideNotif();\n    };\n\n    this.hide = e => {\n      if (!this.dropdown.current.contains(e.target)) {\n        this.setState({\n          showNotifications: false\n        });\n      }\n\n      document.removeEventListener('mousedown', this.hide);\n    };\n\n    this.closeNotif = e => {\n      if (e.target.classList.contains(\"mr-3\")) return;\n      if (e.target.classList.contains(\"notification-info\")) return;\n      if (e.target.classList.contains(\"notifications__box\")) return;\n      if (e.target.classList.contains(\"notifications__item\")) return;\n      if (e.target.classList.contains(\"notifications__title\")) return;\n      if (e.target.classList.contains(\"notifications__content\")) return;\n      if (e.target.classList.contains(\"notifications__no-notif\")) return;\n      if (e.target.classList.contains(\"notif-section\")) return;\n      this.setState({\n        showNotifications: false\n      });\n    };\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('mousedown', this.hide);\n  }\n\n  componentDidMount() {\n    document.addEventListener('mousedown', this.closeNotif);\n  }\n\n  render() {\n    const {\n      notifications\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"notifications\",\n      ref: this.dropdown,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      onClick: this.show,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }\n    }, this.props.children), this.state.showNotifications && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"safe-area\",\n      onClick: this.closeNotif,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"notifications__box mt-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }\n    }, notifications && Object.keys(notifications).length > 0 ? Object.keys(notifications).map(day => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: day,\n        className: \"notification-info p-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        className: \"text-blue text-small mt-3 mb-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 23\n        }\n      }, day), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 23\n        }\n      }, notifications[day].length > 0 ? notifications[day].map(notif => /*#__PURE__*/React.createElement(\"div\", {\n        className: \"notifications__item d-flex align-items-baseline border-bottom \",\n        key: notif.id,\n        onClick: () => this.updateNotification(notif.id, notif.read),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 29\n        }\n      }, !notif.read && /*#__PURE__*/React.createElement(\"img\", {\n        src: Unread,\n        alt: \"notifications read\",\n        className: \"img-fluid mr-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 47\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"w-100 notif-section\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        className: `mb-2 font-weight-bold text-small notifications__title ${notif.read && 'text-grey'}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 33\n        }\n      }, notif === null || notif === void 0 ? void 0 : notif.data.title), /*#__PURE__*/React.createElement(\"p\", {\n        className: `mb-2 text-l-small notifications__content ${notif.read && 'text-grey'}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 33\n        }\n      }, notif === null || notif === void 0 ? void 0 : notif.data.message)))) : /*#__PURE__*/React.createElement(\"p\", {\n        className: \"text-grey text-small text-center mt-2 no-notif\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 27\n        }\n      }, \"No notifications for \", day)));\n    }) : /*#__PURE__*/React.createElement(\"p\", {\n      className: \"text-grey text-small text-center mt-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }\n    }, \"No notifications\"))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    loading: getActionLoadingState(state, actionTypes.GET_RECOMMENDED_INVESTMENTS_REQUEST)\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    updateNotification: (id, payload) => dispatch(updateNotification(id, payload)),\n    getAllNotifications: (limit, page) => dispatch(getAllNotifications(limit, page))\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Notifications));","map":{"version":3,"sources":["/Users/adebayooluyemi/Documents/THE BULB/cpinvest-app/cpinvest-app/src/components/Notifications/index.js"],"names":["React","Component","withRouter","connect","getActionLoadingState","actionTypes","updateNotification","getAllNotifications","Notifications","state","showNotifications","newNotif","dropdown","createRef","id","read","props","then","data","show","e","setState","hideNotif","hide","current","contains","target","document","removeEventListener","closeNotif","classList","componentWillUnmount","componentDidMount","addEventListener","render","notifications","children","Object","keys","length","map","day","notif","Unread","title","message","mapStateToProps","loading","GET_RECOMMENDED_INVESTMENTS_REQUEST","mapDispatchToProps","dispatch","payload","limit","page"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { getActionLoadingState } from \"#/store/selectors\";\nimport actionTypes from \"#/store/notifications/actionTypes\";\nimport { updateNotification, getAllNotifications } from '#/store/notifications/actions'\nimport Unread from '#/assets/icons/unread.svg';\nimport './style.scss';\n\nclass Notifications extends Component {\n  state = {\n    showNotifications: false,\n    newNotif: false,\n  }\n\n  dropdown = React.createRef()\n\n  componentWillUnmount() {\n    document.removeEventListener('mousedown', this.hide);\n  }\n\n  componentDidMount() {\n    document.addEventListener('mousedown', this.closeNotif)\n  }\n\n  updateNotification = (id, read) => {\n    if(read)return;\n\n    this.props.updateNotification(id, { read: true })\n    .then(data => {\n      this.props.getAllNotifications(20,1)\n    })\n  }\n\n  show = (e) => {\n    this.setState((state) => ({ showNotifications: !state.showNotifications }));\n    this.props.hideNotif();\n  }\n\n  hide = (e) => {\n    if (!this.dropdown.current.contains(e.target)) {\n      this.setState({ showNotifications: false });\n    }\n    document.removeEventListener('mousedown', this.hide);\n  }\n\n  closeNotif = (e) => {\n    if(e.target.classList.contains(\"mr-3\")) return;\n    if(e.target.classList.contains(\"notification-info\")) return;\n    if(e.target.classList.contains(\"notifications__box\")) return;\n    if(e.target.classList.contains(\"notifications__item\")) return;\n    if(e.target.classList.contains(\"notifications__title\")) return;\n    if(e.target.classList.contains(\"notifications__content\")) return;\n    if(e.target.classList.contains(\"notifications__no-notif\")) return;\n    if(e.target.classList.contains(\"notif-section\")) return;\n    this.setState({ showNotifications: false });\n  }\n\n  render() {\n    const { notifications } = this.props;\n\n    return (\n      <div className=\"notifications\" ref={this.dropdown}>\n        <div onClick={this.show}>\n        {this.props.children}\n        </div>\n        {this.state.showNotifications &&\n        <div className=\"safe-area\" onClick={this.closeNotif}>\n          <ul className=\"notifications__box mt-2\">\n            {\n              notifications && Object.keys(notifications).length > 0 ?\n                (Object.keys(notifications).map(day => {\n                  return (\n                    <div key={day} className=\"notification-info p-3\">\n                      <p className=\"text-blue text-small mt-3 mb-0\">{day}</p>\n                      <div>\n                        {notifications[day].length > 0 ?\n                          notifications[day].map(notif => (\n                            <div\n                              className=\"notifications__item d-flex align-items-baseline border-bottom \"\n                              key={notif.id}\n                              onClick={() => this.updateNotification(notif.id, notif.read)}\n                            >\n                              {!notif.read && <img src={Unread} alt=\"notifications read\" className=\"img-fluid mr-3\" />}\n\n                              <div className=\"w-100 notif-section\">\n                                <p className={`mb-2 font-weight-bold text-small notifications__title ${notif.read && 'text-grey'}`}>{notif?.data.title}</p>\n                                <p className={`mb-2 text-l-small notifications__content ${notif.read && 'text-grey'}`}>{notif?.data.message}</p>\n                              </div>\n                            </div>))\n                          :\n                          <p className=\"text-grey text-small text-center mt-2 no-notif\">No notifications for {day}</p>\n                        }\n                      </div>\n                    </div>\n                  )\n                })\n                )\n                :\n                <p className=\"text-grey text-small text-center mt-2\">No notifications</p>\n            }\n          </ul>\n          </div>\n          }\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n\n  return {\n    loading: getActionLoadingState(state, actionTypes.GET_RECOMMENDED_INVESTMENTS_REQUEST),\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    updateNotification: (id, payload) => dispatch(updateNotification(id, payload)),\n    getAllNotifications: (limit, page) => dispatch(getAllNotifications(limit, page)),\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Notifications));"]},"metadata":{},"sourceType":"module"}