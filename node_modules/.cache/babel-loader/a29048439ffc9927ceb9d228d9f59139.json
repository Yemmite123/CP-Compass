{"ast":null,"code":"var _jsxFileName = \"/Users/adebayooluyemi/Documents/THE BULB/cpinvest-app/cpinvest-app/src/pages/App/Transactions/index.js\";\nimport React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from \"react-redux\";\nimport { getActionLoadingState } from \"#/store/selectors\";\nimport actionTypes from \"#/store/wallet/actionTypes\";\nimport { getTransactionHistory } from '#/store/wallet/actions';\nimport Back from '#/components/Back';\nimport Transaction from '#/components/Transaction';\nimport Modal from '#/components/Modal';\nimport WalletTransaction from '#/components/WalletTransaction';\nimport './style.scss';\n\nclass Transactions extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      showTransactionModal: false,\n      selectedTransaction: null,\n      limit: 10,\n      page: 1,\n      transactions: {}\n    };\n\n    this.updateTransactions = data => {\n      this.setState({\n        transactions: { ...this.state.transactions,\n          ...data\n        }\n      });\n    };\n\n    this.handleTransactionSelect = transaction => {\n      this.setState({\n        selectedTransaction: transaction\n      }, () => this.setState({\n        showTransactionModal: true\n      }));\n    };\n\n    this.fetchMore = () => {\n      this.setState({\n        page: this.state.page + 1\n      }, () => {\n        this.props.getTransactionHistory(this.state.limit, this.state.page).then(data => this.updateTransactions(data));\n      });\n    };\n\n    this.fetchPrevious = () => {\n      if (this.state.page === 1) {\n        return;\n      }\n\n      this.setState({\n        page: this.state.page - 1\n      }, () => {\n        this.props.getTransactionHistory(this.state.limit, this.state.page).then(data => this.updateTransactions(data));\n      });\n    };\n\n    this.toggleModal = () => {\n      this.setState(prevState => ({\n        showTransactionModal: !prevState.showTransactionModal\n      }));\n    };\n  }\n\n  componentDidMount() {\n    this.props.getTransactionHistory(this.state.limit, 1).then(data => this.updateTransactions(data));\n  }\n\n  render() {\n    var _selectedTransaction$, _selectedTransaction$2;\n\n    const {\n      loading\n    } = this.props;\n    const {\n      showTransactionModal,\n      selectedTransaction,\n      transactions\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"all-transactions-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 7\n      }\n    }, showTransactionModal && /*#__PURE__*/React.createElement(Modal, {\n      onClose: this.toggleModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(WalletTransaction, {\n      transaction: selectedTransaction,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 13\n      }\n    }), (selectedTransaction === null || selectedTransaction === void 0 ? void 0 : (_selectedTransaction$ = selectedTransaction.history) === null || _selectedTransaction$ === void 0 ? void 0 : _selectedTransaction$.length) > 0 && (selectedTransaction === null || selectedTransaction === void 0 ? void 0 : (_selectedTransaction$2 = selectedTransaction.history) === null || _selectedTransaction$2 === void 0 ? void 0 : _selectedTransaction$2.map(history => {\n      return /*#__PURE__*/React.createElement(WalletTransaction, {\n        transaction: history,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 17\n        }\n      });\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Back, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-8 text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"text-medium text-deep-blue \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }\n    }, \"Transaction History\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card p-3 mt-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }\n    }, loading && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-center mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"spinner-border text-primary spinner-border-md text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 15\n      }\n    })), (transactions === null || transactions === void 0 ? void 0 : transactions.transactions) && Object.keys(transactions.transactions).length > 0 ? Object.keys(transactions.transactions).map(day => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: day,\n        className: \"transaction-info\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"text-deep-blue text-small mt-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 19\n        }\n      }, day), /*#__PURE__*/React.createElement(\"div\", {\n        className: `${!transactions.transactions[day][transactions.transactions[day].length - 1] && 'border-bottom'}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 19\n        }\n      }, transactions.transactions[day].length > 0 ? transactions.transactions[day].map(transaction => /*#__PURE__*/React.createElement(Transaction, {\n        transaction: transaction,\n        key: Math.random() * 1000,\n        handleSelect: this.handleTransactionSelect,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 25\n        }\n      })) : /*#__PURE__*/React.createElement(\"p\", {\n        className: \"text-grey text-small text-center mt-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 23\n        }\n      }, \"No transactions for \", day)));\n    }) : !loading && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: require('#/assets/icons/receipt.svg'),\n      alt: \"plus\",\n      className: \"img-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"font-light text-grey\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }\n    }, \" No Transactions\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center d-flex justify-content-between align-items-center mt-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary btn-sm mr-2\",\n      onClick: this.fetchPrevious,\n      disabled: loading || this.state.page === 1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 15\n      }\n    }, \"Prev\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary btn-sm ml-2\",\n      onClick: this.fetchMore,\n      disabled: loading || this.state.page === (transactions === null || transactions === void 0 ? void 0 : transactions.lastPage),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 15\n      }\n    }, \"Next\")), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"text-grey text-small\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 13\n      }\n    }, \"Page \", this.state.page))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  const {\n    app: {\n      wallet: {\n        transactions,\n        error\n      }\n    }\n  } = state;\n  return {\n    loading: getActionLoadingState(state, actionTypes.GET_TRANSACTION_HISTORY_REQUEST),\n    transactions,\n    error\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    getTransactionHistory: (limit, pageNumber) => dispatch(getTransactionHistory(limit, pageNumber))\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Transactions));","map":{"version":3,"sources":["/Users/adebayooluyemi/Documents/THE BULB/cpinvest-app/cpinvest-app/src/pages/App/Transactions/index.js"],"names":["React","withRouter","connect","getActionLoadingState","actionTypes","getTransactionHistory","Back","Transaction","Modal","WalletTransaction","Transactions","Component","state","showTransactionModal","selectedTransaction","limit","page","transactions","updateTransactions","data","setState","handleTransactionSelect","transaction","fetchMore","props","then","fetchPrevious","toggleModal","prevState","componentDidMount","render","loading","history","length","map","Object","keys","day","Math","random","require","lastPage","mapStateToProps","app","wallet","error","GET_TRANSACTION_HISTORY_REQUEST","mapDispatchToProps","dispatch","pageNumber"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from \"react-redux\";\nimport { getActionLoadingState } from \"#/store/selectors\";\nimport actionTypes from \"#/store/wallet/actionTypes\";\nimport { getTransactionHistory } from '#/store/wallet/actions';\nimport Back from '#/components/Back';\nimport Transaction from '#/components/Transaction';\nimport Modal from '#/components/Modal';\nimport WalletTransaction from '#/components/WalletTransaction';\nimport './style.scss';\n\nclass Transactions extends React.Component {\n\n  state = {\n    showTransactionModal: false,\n    selectedTransaction: null,\n    limit: 10,\n    page: 1,\n    transactions: {},\n  }\n  componentDidMount() {\n    this.props.getTransactionHistory(this.state.limit, 1)\n      .then(data => this.updateTransactions(data));\n  }\n\n  updateTransactions = (data) => {\n    this.setState({ transactions: { ...this.state.transactions, ...data } })\n  }\n\n  handleTransactionSelect = (transaction) => {\n    this.setState({ selectedTransaction: transaction },\n      () => this.setState({ showTransactionModal: true }))\n  }\n\n  fetchMore = () => {\n    this.setState({ page: this.state.page + 1 }, () => {\n      this.props.getTransactionHistory(this.state.limit, this.state.page)\n        .then(data => this.updateTransactions(data));\n    })\n  }\n\n  fetchPrevious = () => {\n    if (this.state.page === 1) {\n      return;\n    }\n    this.setState({ page: this.state.page - 1 }, () => {\n      this.props.getTransactionHistory(this.state.limit, this.state.page)\n        .then(data => this.updateTransactions(data));\n    })\n  }\n\n  toggleModal = () => {\n    this.setState(prevState => ({ showTransactionModal: !prevState.showTransactionModal }))\n  }\n\n  render() {\n    const { loading } = this.props;\n    const { showTransactionModal, selectedTransaction, transactions } = this.state;\n\n    return (\n      <div className=\"all-transactions-page\">\n        {\n          showTransactionModal &&\n          <Modal onClose={this.toggleModal}>\n            <WalletTransaction transaction={selectedTransaction} />\n            {selectedTransaction?.history?.length > 0 && \n              selectedTransaction?.history?.map(history => {\n                return (\n                <WalletTransaction transaction={history} />\n                )\n            })\n            }\n          </Modal>\n        }\n        <div className=\"row\">\n          <div className=\"col-md-2\">\n            <Back />\n          </div>\n          <div className=\"col-md-8 text-center\">\n            <h3 className=\"text-medium text-deep-blue \">Transaction History</h3>\n          </div>\n        </div>\n        <div className=\"card p-3 mt-2\">\n          {loading &&\n            <div className=\"d-flex justify-content-center mt-5\">\n              <div className=\"spinner-border text-primary spinner-border-md text-center\"></div>\n            </div>\n          }\n          {transactions?.transactions && Object.keys(transactions.transactions).length > 0 ?\n            Object.keys(transactions.transactions).map(day => {\n              return (\n                <div key={day} className=\"transaction-info\">\n                  <h4 className=\"text-deep-blue text-small mt-3\">{day}</h4>\n                  <div className={`${!transactions.transactions[day][transactions.transactions[day].length - 1] && 'border-bottom'}`}>\n                    {transactions.transactions[day].length > 0 ?\n                      transactions.transactions[day].map(transaction => (\n                        <Transaction\n                          transaction={transaction}\n                          key={Math.random() * 1000}\n                          handleSelect={this.handleTransactionSelect}\n                        />\n                      ))\n                      :\n                      <p className=\"text-grey text-small text-center mt-2\">No transactions for {day}</p>\n                    }\n                  </div>\n\n                </div>\n              )\n            })\n            :\n            (!loading &&\n              <div className=\"text-center mt-4\">\n                <img src={require('#/assets/icons/receipt.svg')} alt=\"plus\" className=\"img-fluid\" />\n                <p className=\"font-light text-grey\"> No Transactions</p>\n              </div>\n            )}\n\n          <div className=\"text-center d-flex justify-content-between align-items-center mt-3\">\n            <div>\n              <button className=\"btn btn-primary btn-sm mr-2\" onClick={this.fetchPrevious} disabled={loading || this.state.page === 1}>\n                Prev\n              </button>\n              <button className=\"btn btn-primary btn-sm ml-2\" onClick={this.fetchMore} disabled={loading || this.state.page === transactions?.lastPage}>\n                Next\n              </button>\n            </div>\n            <p className=\"text-grey text-small\">Page {this.state.page}</p>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  const { app: { wallet: { transactions, error } } } = state;\n\n  return {\n    loading: getActionLoadingState(state, actionTypes.GET_TRANSACTION_HISTORY_REQUEST),\n    transactions,\n    error,\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    getTransactionHistory: (limit, pageNumber) => dispatch(getTransactionHistory(limit, pageNumber)),\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Transactions));\n"]},"metadata":{},"sourceType":"module"}