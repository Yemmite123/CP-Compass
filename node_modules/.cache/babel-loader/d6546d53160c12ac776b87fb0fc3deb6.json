{"ast":null,"code":"var _jsxFileName = \"/Users/adebayooluyemi/Documents/THE BULB/cpinvest-app/cpinvest-app/src/pages/App/Wallet/index.js\";\nimport React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from \"react-redux\";\nimport { getActionLoadingState } from \"#/store/selectors\";\nimport actionTypes from \"#/store/wallet/actionTypes\";\nimport { getWalletDetails } from '#/store/wallet/actions';\nimport { getUserProfile } from \"#/store/profile/actions\";\nimport Card from '#/components/Card';\nimport Transaction from '#/components/Transaction';\nimport Modal from '#/components/Modal';\nimport InformationBar from '#/components/InformationBar';\nimport WalletTransaction from '#/components/WalletTransaction';\nimport WalletSkeleton from './Skeleton';\nimport { formatDate } from '#/utils';\nimport './style.scss';\n\nclass Wallet extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      selectedTransaction: null,\n      showTransactionModal: false,\n      isBvnModal: false\n    };\n\n    this.handleDeposit = () => {\n      this.props.history.push({\n        pathname: `/app/wallet/deposit`,\n        state: {\n          routeName: 'Deposit'\n        }\n      });\n    };\n\n    this.handleWithdraw = () => {\n      if (!this.props.isBvnActive) {\n        return this.toggleBvnModal();\n      }\n\n      this.props.history.push({\n        pathname: `/app/wallet/withdraw`,\n        state: {\n          routeName: 'Withdraw'\n        }\n      });\n    };\n\n    this.handleTransactionSelect = transaction => {\n      this.setState({\n        selectedTransaction: transaction\n      }, () => this.setState({\n        showTransactionModal: true\n      }));\n    };\n\n    this.handleBvnSetup = () => {\n      this.props.history.push('/app/onboarding');\n    };\n\n    this.navigateTotransactions = () => {\n      this.props.history.push({\n        pathname: `/app/wallet/transactions`,\n        state: {\n          routeName: 'Transactions'\n        }\n      });\n    };\n\n    this.toggleModal = () => {\n      this.setState(prevState => ({\n        showTransactionModal: !prevState.showTransactionModal\n      }));\n    };\n\n    this.toggleBvnModal = () => {\n      this.setState(prevState => ({\n        isBvnModal: !prevState.isBvnModal\n      }));\n    };\n  }\n\n  componentDidMount() {\n    this.props.getWalletDetails();\n    this.props.getUserProfile();\n  }\n\n  render() {\n    var _selectedTransaction$, _selectedTransaction$2;\n\n    const {\n      loading,\n      walletDetails,\n      isBvnActive,\n      isApproved\n    } = this.props;\n    const {\n      showTransactionModal,\n      selectedTransaction,\n      isBvnModal\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"wallet-dashboard-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 7\n      }\n    }, loading && !walletDetails && /*#__PURE__*/React.createElement(WalletSkeleton, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 39\n      }\n    }), isBvnModal && /*#__PURE__*/React.createElement(Modal, {\n      classes: \"bvn-active\",\n      onClose: this.toggleBvnModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"text-deep-blue\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 15\n      }\n    }, \"Please Setup your BVN to continue\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary btn-sm btn-block mt-4\",\n      onClick: this.handleBvnSetup,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 15\n      }\n    }, \"Setup BVN\"))), isBvnActive && !isApproved && /*#__PURE__*/React.createElement(InformationBar, {\n      className: \"mt-3 mb-3 text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }\n    }, \"Your account is awaiting approval, you won't be able to perform some actions\"), showTransactionModal && /*#__PURE__*/React.createElement(Modal, {\n      onClose: this.toggleModal,\n      classes: \"tran-modal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(WalletTransaction, {\n      transaction: selectedTransaction,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 13\n      }\n    }), (selectedTransaction === null || selectedTransaction === void 0 ? void 0 : (_selectedTransaction$ = selectedTransaction.history) === null || _selectedTransaction$ === void 0 ? void 0 : _selectedTransaction$.length) > 0 && (selectedTransaction === null || selectedTransaction === void 0 ? void 0 : (_selectedTransaction$2 = selectedTransaction.history) === null || _selectedTransaction$2 === void 0 ? void 0 : _selectedTransaction$2.map(history => {\n      return /*#__PURE__*/React.createElement(WalletTransaction, {\n        transaction: history,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 17\n        }\n      });\n    }))), walletDetails && /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pt-3 overview\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      classes: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row no-gutters\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-between flex-wrap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 mt-2 mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 23\n      }\n    }, \"NAIRA BALANCE\"), /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"balance-figure\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 23\n      }\n    }, \"\\u20A6 \", walletDetails && walletDetails.wallet.NGN ? walletDetails.wallet.NGN : '0.00')), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 mt-2 mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 23\n      }\n    }, \"DOLLAR BALANCE\"), /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"balance-figure\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 23\n      }\n    }, \"$ 0.00 \")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-between mt-2 flex-wrap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 text-center mt-2 mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary btn-sm w-100\",\n      onClick: this.handleDeposit,\n      disabled: loading && !walletDetails,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 23\n      }\n    }, \"Deposit\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 text-center mt-2 mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-white btn-sm w-100\",\n      onClick: this.handleWithdraw,\n      disabled: loading && !walletDetails,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 23\n      }\n    }, \"Withdraw\"))))))), !walletDetails && loading && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-center mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"spinner-border text-primary spinner-border-md text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"transactions\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      classes: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"transactions-header d-flex justify-content-between\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }\n    }, \"Transactions\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"text-blue mb-0 cursor-pointer\",\n      onClick: this.navigateTotransactions,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }\n    }, \"View all \", '>')), walletDetails ? Object.keys(walletDetails.transactions).map(day => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: day,\n        className: \"transaction-info\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"text-deep-blue text-small mt-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 25\n        }\n      }, formatDate(day)), /*#__PURE__*/React.createElement(\"div\", {\n        className: `${!walletDetails.transactions[day][walletDetails.transactions[day].length - 1] && 'border-bottom'}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 25\n        }\n      }, walletDetails.transactions[day].length > 0 ? walletDetails.transactions[day].map(transaction => /*#__PURE__*/React.createElement(Transaction, {\n        transaction: transaction,\n        key: transaction.reference,\n        handleSelect: this.handleTransactionSelect,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 31\n        }\n      })) : /*#__PURE__*/React.createElement(\"p\", {\n        className: \"text-grey text-small text-center mt-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 29\n        }\n      }, \"No transactions for \", day)));\n    }) : /*#__PURE__*/React.createElement(\"p\", {\n      className: \"text-grey text-small text-center mt-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 19\n      }\n    }, \"No transactions\")))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  const {\n    app: {\n      wallet: {\n        walletDetails,\n        error,\n        data: walletData\n      },\n      profile: {\n        userProfile: {\n          data\n        }\n      }\n    }\n  } = state;\n  return {\n    loading: getActionLoadingState(state, actionTypes.GET_WALLET_DETAILS_REQUEST),\n    walletDetails,\n    walletData,\n    error,\n    isBvnActive: data && data.bvn ? true : false,\n    isApproved: data && data.isApproved === 1 ? true : false // userProfile,\n\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    getWalletDetails: () => dispatch(getWalletDetails()),\n    getUserProfile: () => dispatch(getUserProfile())\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Wallet));","map":{"version":3,"sources":["/Users/adebayooluyemi/Documents/THE BULB/cpinvest-app/cpinvest-app/src/pages/App/Wallet/index.js"],"names":["React","withRouter","connect","getActionLoadingState","actionTypes","getWalletDetails","getUserProfile","Card","Transaction","Modal","InformationBar","WalletTransaction","WalletSkeleton","formatDate","Wallet","Component","state","selectedTransaction","showTransactionModal","isBvnModal","handleDeposit","props","history","push","pathname","routeName","handleWithdraw","isBvnActive","toggleBvnModal","handleTransactionSelect","transaction","setState","handleBvnSetup","navigateTotransactions","toggleModal","prevState","componentDidMount","render","loading","walletDetails","isApproved","length","map","wallet","NGN","Object","keys","transactions","day","reference","mapStateToProps","app","error","data","walletData","profile","userProfile","GET_WALLET_DETAILS_REQUEST","bvn","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from \"react-redux\";\nimport { getActionLoadingState } from \"#/store/selectors\";\nimport actionTypes from \"#/store/wallet/actionTypes\";\nimport { getWalletDetails } from '#/store/wallet/actions';\nimport { getUserProfile } from \"#/store/profile/actions\";\nimport Card from '#/components/Card';\nimport Transaction from '#/components/Transaction';\nimport Modal from '#/components/Modal';\nimport InformationBar from '#/components/InformationBar';\nimport WalletTransaction from '#/components/WalletTransaction';\nimport WalletSkeleton from './Skeleton';\nimport { formatDate } from '#/utils';\nimport './style.scss';\n\nclass Wallet extends React.Component {\n\n  state = {\n    selectedTransaction: null,\n    showTransactionModal: false,\n    isBvnModal: false,\n  }\n\n  componentDidMount() {\n    this.props.getWalletDetails();\n    this.props.getUserProfile();\n  }\n\n  handleDeposit = () => {\n    this.props.history.push({\n      pathname: `/app/wallet/deposit`,\n      state: { routeName: 'Deposit' }\n      })\n  }\n\n  handleWithdraw = () => {\n    if(!this.props.isBvnActive) {\n      return this.toggleBvnModal()\n    }\n    this.props.history.push({\n    pathname: `/app/wallet/withdraw`,\n    state: { routeName: 'Withdraw' }\n    })\n  }\n\n  handleTransactionSelect = (transaction) => {\n    this.setState({ selectedTransaction: transaction },\n      () => this.setState({ showTransactionModal: true }))\n  }\n\n  handleBvnSetup = () => {\n    this.props.history.push('/app/onboarding');\n  }\n\n  navigateTotransactions = () => {\n    this.props.history.push({\n      pathname: `/app/wallet/transactions`,\n      state: { routeName: 'Transactions' }\n      })\n  }\n\n  toggleModal = () => {\n    this.setState(prevState => ({ showTransactionModal: !prevState.showTransactionModal }))\n  }\n\n  toggleBvnModal = () => {\n    this.setState(prevState => ({ isBvnModal: !prevState.isBvnModal }))\n  }\n\n  render() {\n    const { loading, walletDetails, isBvnActive, isApproved } = this.props;\n    const { showTransactionModal, selectedTransaction, isBvnModal } = this.state;\n\n    return (\n      <div className=\"wallet-dashboard-page\">\n        {loading && !walletDetails && <WalletSkeleton />}\n        {isBvnModal &&\n          <Modal classes=\"bvn-active\" onClose={this.toggleBvnModal}>\n            <div className=\"text-center\">\n              <h3 className=\"text-deep-blue\">Please Setup your BVN to continue</h3>\n              <button className=\"btn btn-primary btn-sm btn-block mt-4\" onClick={this.handleBvnSetup}>\n                Setup BVN\n              </button>\n            </div>\n          </Modal>\n        }\n        {isBvnActive && !isApproved &&\n          <InformationBar className=\"mt-3 mb-3 text-white\">\n            Your account is awaiting approval, you won't be able to perform some actions\n          </InformationBar>\n        }\n        {\n          showTransactionModal &&\n          <Modal onClose={this.toggleModal} classes=\"tran-modal\">\n            <WalletTransaction transaction={selectedTransaction} />\n            {selectedTransaction?.history?.length > 0 && \n              selectedTransaction?.history?.map(history => {\n                return (\n                <WalletTransaction transaction={history} />\n                )\n            })\n            }\n          </Modal>\n        }\n        {walletDetails &&\n        <div>\n          <div className=\"pt-3 overview\">\n            <Card classes=\"card\">\n              <div className=\"row no-gutters\">\n                <div className=\"col-md-6\">\n                  <div className=\"d-flex justify-content-between flex-wrap\">\n                    <div className=\"col-md-6 mt-2 mb-2\">\n                      <p className=\"label\">NAIRA BALANCE</p>\n                      <h3 className=\"balance-figure\">&#x20A6; {walletDetails && walletDetails.wallet.NGN ? walletDetails.wallet.NGN : '0.00'}</h3>\n                    </div>\n                    <div className=\"col-md-6 mt-2 mb-2\">\n                      <p className=\"label\">DOLLAR BALANCE</p>\n                      <h3 className=\"balance-figure\">&#36; 0.00 </h3>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"col-md-6\">\n                  <div className=\"d-flex justify-content-between mt-2 flex-wrap\">\n                    <div className=\"col-md-6 text-center mt-2 mb-2\">\n                      <button className=\"btn btn-primary btn-sm w-100\" onClick={this.handleDeposit} disabled={loading && !walletDetails}>\n                        Deposit\n                    </button>\n                    </div>\n                    <div className=\"col-md-6 text-center mt-2 mb-2\">\n                      <button className=\"btn btn-white btn-sm w-100\" onClick={this.handleWithdraw} disabled={loading && !walletDetails}>\n                        Withdraw\n                    </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </Card>\n          </div>\n          {!walletDetails && loading &&\n            <div className=\"d-flex justify-content-center mt-5\">\n              <div className=\"spinner-border text-primary spinner-border-md text-center\"></div>\n            </div>\n          }\n          <div className=\"transactions\">\n            <Card classes=\"card\">\n              <div className=\"transactions-header d-flex justify-content-between\">\n                <h3 className=\"\">Transactions</h3>\n                <p className=\"text-blue mb-0 cursor-pointer\" onClick={this.navigateTotransactions}>View all {'>'}</p>\n              </div>\n              {walletDetails\n                ? (\n                  Object.keys(walletDetails.transactions).map(day => {\n                    return (\n                      <div key={day} className=\"transaction-info\">\n                        <h4 className=\"text-deep-blue text-small mt-3\">{formatDate(day)}</h4>\n                        <div className={`${!walletDetails.transactions[day][walletDetails.transactions[day].length - 1] && 'border-bottom'}`}>\n                          {walletDetails.transactions[day].length > 0 ?\n                            walletDetails.transactions[day].map(transaction => (\n                              <Transaction\n                                transaction={transaction}\n                                key={transaction.reference}\n                                handleSelect={this.handleTransactionSelect}\n                              />\n                            ))\n                            :\n                            <p className=\"text-grey text-small text-center mt-2\">No transactions for {day}</p>\n                          }\n                        </div>\n\n                      </div>\n                    )\n                  })\n                )\n                : <p className=\"text-grey text-small text-center mt-2\">No transactions</p>}\n            </Card>\n          </div>\n        </div>\n        }\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  const { app: { wallet: { walletDetails, error, data: walletData }, profile: { userProfile: { data } } } } = state;\n\n  return {\n    loading: getActionLoadingState(state, actionTypes.GET_WALLET_DETAILS_REQUEST),\n    walletDetails,\n    walletData,\n    error,\n    isBvnActive: data && data.bvn ? true : false,\n    isApproved: data && data.isApproved === 1 ? true : false,\n    // userProfile,\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    getWalletDetails: () => dispatch(getWalletDetails()),\n    getUserProfile: () => dispatch(getUserProfile()),\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Wallet));"]},"metadata":{},"sourceType":"module"}