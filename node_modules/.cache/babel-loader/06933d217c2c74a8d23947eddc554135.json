{"ast":null,"code":"var _jsxFileName = \"/Users/adebayooluyemi/Documents/THE BULB/cpinvest-app/cpinvest-app/src/pages/App/Profile/NextOfKin/index.js\";\nimport React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport moment from \"moment\";\nimport { connect } from \"react-redux\";\nimport { getActionLoadingState } from \"#/store/selectors\";\nimport { addNextOfKinDetails } from \"#/store/profile/actions\";\nimport actionTypes from \"#/store/profile/actionTypes\";\nimport Alert from \"#/components/Alert\";\nimport Modal from \"#/components/Modal\";\nimport CustomInput from \"#/components/CustomInput\";\nimport { validateFields, serializeErrors, genderOption, relationshipOption } from \"#/utils\";\nimport \"./style.scss\";\n\nclass NextOfKin extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      firstName: \"\",\n      lastName: \"\",\n      email: \"\",\n      gender: \"\",\n      phone: \"\",\n      dateOfBirth: new Date(),\n      relationship: \"\",\n      motherMaidenName: \"\",\n      contactAddress: \"\",\n      nationality: \"\",\n      errors: null,\n      countryCode: \"+234\",\n      isBvnModal: false\n    };\n\n    this.setValues = () => {\n      const {\n        userInfo\n      } = this.props;\n\n      if (userInfo) {\n        this.setState({\n          firstName: userInfo && userInfo.firstName ? userInfo.firstName : \"\",\n          lastName: userInfo && userInfo.lastName ? userInfo.lastName : \"\",\n          email: userInfo && userInfo.email ? userInfo.email : \"\",\n          phone: userInfo && userInfo.phone ? userInfo.phone : \"\",\n          gender: userInfo && userInfo.gender ? userInfo.gender : \"\",\n          dateOfBirth: userInfo && userInfo.dateOfBirth ? new Date(userInfo.dateOfBirth.split(\"T\")[0]) : \"\",\n          relationship: userInfo && userInfo.relationship ? userInfo.relationship : \"\",\n          motherMaidenName: userInfo && userInfo.motherMaidenName ? userInfo.motherMaidenName : \"\",\n          contactAddress: userInfo && userInfo.contactAddress ? userInfo.contactAddress : \"\",\n          nationality: userInfo && userInfo.nationality ? userInfo.nationality : \"\",\n          countryCode: userInfo && userInfo.countryCode ? userInfo.countryCode : \"+234\"\n        });\n      }\n    };\n\n    this.handleChange = event => {\n      const {\n        name,\n        value\n      } = event.target;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.handleChangeDate = (item, date) => {\n      this.setState({\n        [item]: date\n      });\n    };\n\n    this.handleGenderChange = event => {\n      const {\n        value\n      } = event.target;\n      this.setState({\n        gender: value\n      });\n    };\n\n    this.handleRelationshipChange = event => {\n      const {\n        value\n      } = event.target;\n      this.setState({\n        relationship: value\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n\n      if (!this.props.isBvnActive) {\n        return this.toggleBvnModal();\n      }\n\n      const {\n        addNextOfKinDetails\n      } = this.props;\n      const {\n        firstName,\n        lastName,\n        email,\n        phone,\n        dateOfBirth,\n        motherMaidenName,\n        contactAddress,\n        nationality,\n        relationship,\n        gender,\n        countryCode\n      } = this.state;\n      this.setState({\n        errors: null\n      });\n      const data = this.state;\n      const required = [];\n      const errors = validateFields(data, required);\n\n      if (Object.keys(errors).length > 0) {\n        return this.setState({\n          errors\n        });\n      }\n\n      const payload = {\n        firstName,\n        lastName,\n        email,\n        phone,\n        dateOfBirth: moment(dateOfBirth).format(\"YYYY-MM-DD\"),\n        motherMaidenName,\n        contactAddress,\n        nationality,\n        relationship,\n        gender,\n        countryCode\n      };\n      addNextOfKinDetails(payload);\n    };\n\n    this.handleBvnSetup = () => {\n      this.props.history.push(\"/app/onboarding\");\n    };\n\n    this.toggleBvnModal = () => {\n      this.setState(prevState => ({\n        isBvnModal: !prevState.isBvnModal\n      }));\n    };\n  }\n\n  componentDidMount() {\n    this.setValues();\n  }\n\n  render() {\n    const {\n      isBvnModal,\n      firstName,\n      lastName,\n      email,\n      phone,\n      dateOfBirth,\n      motherMaidenName,\n      contactAddress,\n      nationality,\n      errors,\n      gender,\n      relationship,\n      countryCode\n    } = this.state;\n    const {\n      loading,\n      error,\n      data\n    } = this.props;\n    const errorObject = serializeErrors(error);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"section-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 7\n      }\n    }, isBvnModal && /*#__PURE__*/React.createElement(Modal, {\n      classes: \"bvn-active\",\n      onClose: this.toggleBvnModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"text-deep-blue\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 15\n      }\n    }, \"Please Setup your BVN to continue\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary btn-sm btn-block mt-4\",\n      onClick: this.handleBvnSetup,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 15\n      }\n    }, \"Setup BVN\"))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"section-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 11\n      }\n    }, \"Next of Kin\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"section-description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 11\n      }\n    }, \"Your next of kin will be contacted in any case that we notice inactivity on your account after a period of 6 months.\"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      className: \"section-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CustomInput, {\n      name: \"firstName\",\n      label: \"First name\",\n      value: firstName,\n      onChange: this.handleChange,\n      error: errors ? errors.firstName : errorObject && errorObject[\"firstName\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(CustomInput, {\n      name: \"lastName\",\n      label: \"Last name\",\n      value: lastName,\n      onChange: this.handleChange,\n      error: errors ? errors.lastName : errorObject && errorObject[\"lastName\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(CustomInput, {\n      name: \"gender\",\n      label: \"Gender\",\n      value: gender,\n      onChange: this.handleGenderChange,\n      type: \"select\",\n      options: genderOption,\n      error: errors ? errors.gender : errorObject && errorObject[\"gender\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(CustomInput, {\n      name: \"dateOfBirth\",\n      label: \"Date of birth\",\n      value: dateOfBirth,\n      type: \"date\",\n      onChange: date => this.handleChangeDate(\"dateOfBirth\", date),\n      error: errors ? errors.dateOfBirth : errorObject && errorObject[\"dateOfBirth\"],\n      maxDate: new Date(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(CustomInput, {\n      name: \"relationship\",\n      label: \"Relationship\",\n      value: relationship,\n      onChange: this.handleRelationshipChange,\n      type: \"select\",\n      options: relationshipOption,\n      error: errors ? errors.relationship : errorObject && errorObject[\"relationship\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(CustomInput, {\n      name: \"email\",\n      label: \"Email Address\",\n      value: email,\n      onChange: this.handleChange,\n      error: errors ? errors.email : errorObject && errorObject[\"email\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(CustomInput, {\n      name: \"phone\",\n      label: \"Phone number\",\n      type: \"phone\",\n      value: phone,\n      countryCodeValue: countryCode,\n      onChange: this.handleChange,\n      error: errors ? errors.phoneNumber : errorObject && errorObject[\"phone\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(CustomInput, {\n      name: \"motherMaidenName\",\n      label: \"Mother's maiden name\",\n      value: motherMaidenName,\n      onChange: this.handleChange,\n      error: errors ? errors.motherMaidenName : errorObject && errorObject[\"motherMaidenName\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(CustomInput, {\n      name: \"contactAddress\",\n      label: \"Contact Address\",\n      value: contactAddress,\n      onChange: this.handleChange,\n      error: errors ? errors.contactAddress : errorObject && errorObject[\"contactAddress\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(CustomInput, {\n      name: \"nationality\",\n      label: \"Nationality\",\n      value: nationality,\n      onChange: this.handleChange,\n      error: errors ? errors.nationality : errorObject && errorObject[\"nationality\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"section-form__button-area\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 13\n      }\n    }, error && typeof error === \"string\" && /*#__PURE__*/React.createElement(\"p\", {\n      className: \"text-error text-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 17\n      }\n    }, error), data && /*#__PURE__*/React.createElement(Alert, {\n      alert: {\n        type: \"success\",\n        message: data.message\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn-default\",\n      disabled: loading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 15\n      }\n    }, \"Save changes\", loading && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"spinner-border spinner-border-white spinner-border-sm ml-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 19\n      }\n    }))))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  const {\n    app: {\n      profile: {\n        userProfile: {\n          data: userData\n        },\n        nextOfKin: {\n          error,\n          data\n        }\n      }\n    }\n  } = state;\n  return {\n    loading: getActionLoadingState(state, actionTypes.ADD_NEXT_OF_KIN_REQUEST),\n    error,\n    data,\n    isBvnActive: userData && userData.bvn ? true : false\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    addNextOfKinDetails: payload => dispatch(addNextOfKinDetails(payload))\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(NextOfKin));","map":{"version":3,"sources":["/Users/adebayooluyemi/Documents/THE BULB/cpinvest-app/cpinvest-app/src/pages/App/Profile/NextOfKin/index.js"],"names":["React","withRouter","moment","connect","getActionLoadingState","addNextOfKinDetails","actionTypes","Alert","Modal","CustomInput","validateFields","serializeErrors","genderOption","relationshipOption","NextOfKin","Component","state","firstName","lastName","email","gender","phone","dateOfBirth","Date","relationship","motherMaidenName","contactAddress","nationality","errors","countryCode","isBvnModal","setValues","userInfo","props","setState","split","handleChange","event","name","value","target","handleChangeDate","item","date","handleGenderChange","handleRelationshipChange","handleSubmit","preventDefault","isBvnActive","toggleBvnModal","data","required","Object","keys","length","payload","format","handleBvnSetup","history","push","prevState","componentDidMount","render","loading","error","errorObject","phoneNumber","type","message","mapStateToProps","app","profile","userProfile","userData","nextOfKin","ADD_NEXT_OF_KIN_REQUEST","bvn","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport moment from \"moment\";\nimport { connect } from \"react-redux\";\nimport { getActionLoadingState } from \"#/store/selectors\";\nimport { addNextOfKinDetails } from \"#/store/profile/actions\";\nimport actionTypes from \"#/store/profile/actionTypes\";\nimport Alert from \"#/components/Alert\";\nimport Modal from \"#/components/Modal\";\nimport CustomInput from \"#/components/CustomInput\";\nimport {\n  validateFields,\n  serializeErrors,\n  genderOption,\n  relationshipOption,\n} from \"#/utils\";\nimport \"./style.scss\";\n\nclass NextOfKin extends React.Component {\n  state = {\n    firstName: \"\",\n    lastName: \"\",\n    email: \"\",\n    gender: \"\",\n    phone: \"\",\n    dateOfBirth: new Date(),\n    relationship: \"\",\n    motherMaidenName: \"\",\n    contactAddress: \"\",\n    nationality: \"\",\n    errors: null,\n    countryCode: \"+234\",\n    isBvnModal: false,\n  };\n\n  componentDidMount() {\n    this.setValues();\n  }\n\n  setValues = () => {\n    const { userInfo } = this.props;\n    if (userInfo) {\n      this.setState({\n        firstName: userInfo && userInfo.firstName ? userInfo.firstName : \"\",\n        lastName: userInfo && userInfo.lastName ? userInfo.lastName : \"\",\n        email: userInfo && userInfo.email ? userInfo.email : \"\",\n        phone: userInfo && userInfo.phone ? userInfo.phone : \"\",\n        gender: userInfo && userInfo.gender ? userInfo.gender : \"\",\n        dateOfBirth:\n          userInfo && userInfo.dateOfBirth\n            ? new Date(userInfo.dateOfBirth.split(\"T\")[0])\n            : \"\",\n        relationship:\n          userInfo && userInfo.relationship ? userInfo.relationship : \"\",\n        motherMaidenName:\n          userInfo && userInfo.motherMaidenName\n            ? userInfo.motherMaidenName\n            : \"\",\n        contactAddress:\n          userInfo && userInfo.contactAddress ? userInfo.contactAddress : \"\",\n        nationality:\n          userInfo && userInfo.nationality ? userInfo.nationality : \"\",\n        countryCode:\n          userInfo && userInfo.countryCode ? userInfo.countryCode : \"+234\",\n      });\n    }\n  };\n\n  handleChange = (event) => {\n    const { name, value } = event.target;\n    this.setState({ [name]: value });\n  };\n\n  handleChangeDate = (item, date) => {\n    this.setState({ [item]: date });\n  };\n\n  handleGenderChange = (event) => {\n    const { value } = event.target;\n    this.setState({ gender: value });\n  };\n\n  handleRelationshipChange = (event) => {\n    const { value } = event.target;\n    this.setState({ relationship: value });\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n\n    if (!this.props.isBvnActive) {\n      return this.toggleBvnModal();\n    }\n\n    const { addNextOfKinDetails } = this.props;\n    const {\n      firstName,\n      lastName,\n      email,\n      phone,\n      dateOfBirth,\n      motherMaidenName,\n      contactAddress,\n      nationality,\n      relationship,\n      gender,\n      countryCode,\n    } = this.state;\n\n    this.setState({ errors: null });\n\n    const data = this.state;\n    const required = [];\n    const errors = validateFields(data, required);\n\n    if (Object.keys(errors).length > 0) {\n      return this.setState({ errors });\n    }\n    const payload = {\n      firstName,\n      lastName,\n      email,\n      phone,\n      dateOfBirth: moment(dateOfBirth).format(\"YYYY-MM-DD\"),\n      motherMaidenName,\n      contactAddress,\n      nationality,\n      relationship,\n      gender,\n      countryCode,\n    };\n    addNextOfKinDetails(payload);\n  };\n\n  handleBvnSetup = () => {\n    this.props.history.push(\"/app/onboarding\");\n  };\n\n  toggleBvnModal = () => {\n    this.setState((prevState) => ({ isBvnModal: !prevState.isBvnModal }));\n  };\n\n  render() {\n    const {\n      isBvnModal,\n      firstName,\n      lastName,\n      email,\n      phone,\n      dateOfBirth,\n      motherMaidenName,\n      contactAddress,\n      nationality,\n      errors,\n      gender,\n      relationship,\n      countryCode,\n    } = this.state;\n    const { loading, error, data } = this.props;\n    const errorObject = serializeErrors(error);\n\n    return (\n      <div className=\"section-container\">\n        {isBvnModal && (\n          <Modal classes=\"bvn-active\" onClose={this.toggleBvnModal}>\n            <div className=\"text-center\">\n              <h3 className=\"text-deep-blue\">\n                Please Setup your BVN to continue\n              </h3>\n              <button\n                className=\"btn btn-primary btn-sm btn-block mt-4\"\n                onClick={this.handleBvnSetup}\n              >\n                Setup BVN\n              </button>\n            </div>\n          </Modal>\n        )}\n\n        <div>\n          <h2 className=\"section-header\">Next of Kin</h2>\n          <p className=\"section-description\">\n            Your next of kin will be contacted in any case that we notice\n            inactivity on your account after a period of 6 months.\n          </p>\n          <form onSubmit={this.handleSubmit} className=\"section-form\">\n            <CustomInput\n              name=\"firstName\"\n              label=\"First name\"\n              value={firstName}\n              onChange={this.handleChange}\n              error={\n                errors\n                  ? errors.firstName\n                  : errorObject && errorObject[\"firstName\"]\n              }\n            />\n            <CustomInput\n              name=\"lastName\"\n              label=\"Last name\"\n              value={lastName}\n              onChange={this.handleChange}\n              error={\n                errors\n                  ? errors.lastName\n                  : errorObject && errorObject[\"lastName\"]\n              }\n            />\n            <CustomInput\n              name=\"gender\"\n              label=\"Gender\"\n              value={gender}\n              onChange={this.handleGenderChange}\n              type=\"select\"\n              options={genderOption}\n              error={\n                errors ? errors.gender : errorObject && errorObject[\"gender\"]\n              }\n            />\n            <CustomInput\n              name=\"dateOfBirth\"\n              label=\"Date of birth\"\n              value={dateOfBirth}\n              type=\"date\"\n              onChange={(date) => this.handleChangeDate(\"dateOfBirth\", date)}\n              error={\n                errors\n                  ? errors.dateOfBirth\n                  : errorObject && errorObject[\"dateOfBirth\"]\n              }\n              maxDate={new Date()}\n            />\n            <CustomInput\n              name=\"relationship\"\n              label=\"Relationship\"\n              value={relationship}\n              onChange={this.handleRelationshipChange}\n              type=\"select\"\n              options={relationshipOption}\n              error={\n                errors\n                  ? errors.relationship\n                  : errorObject && errorObject[\"relationship\"]\n              }\n            />\n            <CustomInput\n              name=\"email\"\n              label=\"Email Address\"\n              value={email}\n              onChange={this.handleChange}\n              error={\n                errors ? errors.email : errorObject && errorObject[\"email\"]\n              }\n            />\n            <CustomInput\n              name=\"phone\"\n              label=\"Phone number\"\n              type=\"phone\"\n              value={phone}\n              countryCodeValue={countryCode}\n              onChange={this.handleChange}\n              error={\n                errors\n                  ? errors.phoneNumber\n                  : errorObject && errorObject[\"phone\"]\n              }\n            />\n            <CustomInput\n              name=\"motherMaidenName\"\n              label=\"Mother's maiden name\"\n              value={motherMaidenName}\n              onChange={this.handleChange}\n              error={\n                errors\n                  ? errors.motherMaidenName\n                  : errorObject && errorObject[\"motherMaidenName\"]\n              }\n            />\n            <CustomInput\n              name=\"contactAddress\"\n              label=\"Contact Address\"\n              value={contactAddress}\n              onChange={this.handleChange}\n              error={\n                errors\n                  ? errors.contactAddress\n                  : errorObject && errorObject[\"contactAddress\"]\n              }\n            />\n            <CustomInput\n              name=\"nationality\"\n              label=\"Nationality\"\n              value={nationality}\n              onChange={this.handleChange}\n              error={\n                errors\n                  ? errors.nationality\n                  : errorObject && errorObject[\"nationality\"]\n              }\n            />\n            <div className=\"section-form__button-area\">\n              {error && typeof error === \"string\" && (\n                <p className=\"text-error text-left\">{error}</p>\n              )}\n              {data && (\n                <Alert alert={{ type: \"success\", message: data.message }} />\n              )}\n              <button className=\"btn-default\" disabled={loading}>\n                Save changes\n                {loading && (\n                  <div className=\"spinner-border spinner-border-white spinner-border-sm ml-2\"></div>\n                )}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  const {\n    app: {\n      profile: {\n        userProfile: { data: userData },\n        nextOfKin: { error, data },\n      },\n    },\n  } = state;\n  return {\n    loading: getActionLoadingState(state, actionTypes.ADD_NEXT_OF_KIN_REQUEST),\n    error,\n    data,\n    isBvnActive: userData && userData.bvn ? true : false,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    addNextOfKinDetails: (payload) => dispatch(addNextOfKinDetails(payload)),\n  };\n};\n\nexport default withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(NextOfKin)\n);\n"]},"metadata":{},"sourceType":"module"}